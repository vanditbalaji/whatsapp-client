"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["src_components_common_CaptureAudio_jsx"],{

/***/ "./src/components/common/CaptureAudio.jsx":
/*!************************************************!*\
  !*** ./src/components/common/CaptureAudio.jsx ***!
  \************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _context_StateContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/context/StateContext */ \"./src/context/StateContext.jsx\");\n/* harmony import */ var _utils_ApiRoutes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/ApiRoutes */ \"./src/utils/ApiRoutes.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-icons/fa */ \"./node_modules/react-icons/fa/index.esm.js\");\n/* harmony import */ var react_icons_md__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-icons/md */ \"./node_modules/react-icons/md/index.esm.js\");\n/* harmony import */ var wavesurfer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wavesurfer.js */ \"./node_modules/wavesurfer.js/dist/wavesurfer.esm.js\");\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\nconst CaptureAudio = (param)=>{\n    let { hide  } = param;\n    _s();\n    const [{ userInfo , currentUser , socket  }, dispatch] = (0,_context_StateContext__WEBPACK_IMPORTED_MODULE_1__.useStateProvider)();\n    const [isRecording, setIsRecording] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const [recordedAudio, setRecordedAudio] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const [waveForm, setWaveForm] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const [recordingDuration, setRecordingDuration] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(0);\n    const [currentPlaybackTime, setCurrentPlaybackTime] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(0);\n    const [totalDuration, settotalDuration] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(0);\n    const [isPlaying, setIsPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(0);\n    const [renderedAudio, setRenderedaudio] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const audioRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n    const mediaRecordedRed = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n    const waveFormRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{\n        let interval;\n        if (isRecording) {\n            interval = setInterval(()=>{\n                setRecordingDuration((prevDuration)=>{\n                    settotalDuration(prevDuration + 1);\n                    return prevDuration + 1;\n                });\n            }, 1000);\n        }\n        return ()=>{\n            clearInterval(interval);\n        };\n    }, [\n        isRecording\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{\n        const wavesurfer = wavesurfer_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].create({\n            container: waveFormRef.current,\n            waveColor: \"#ccc\",\n            progressColor: \"#4a9eff\",\n            cursorColor: \"#7ae3c3\",\n            barWidth: 2,\n            height: 30,\n            responsive: true\n        });\n        setWaveForm(wavesurfer);\n        wavesurfer.on(\"finish\", ()=>{\n            setIsPlaying(false);\n        });\n        return ()=>{\n            wavesurfer.destroy();\n        };\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{\n        if (recordedAudio) {\n            const updatePlaybackTime = ()=>{\n                setCurrentPlaybackTime(recordedAudio.currentTime);\n            };\n            recordedAudio.addEventListener(\"timeupdate\", updatePlaybackTime);\n            return ()=>{\n                recordedAudio.removeEventListener(\"timeupdate\", updatePlaybackTime);\n            };\n        }\n    }, [\n        recordedAudio\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{\n        if (waveForm) handleStartRecording();\n    }, [\n        waveForm\n    ]);\n    const handleStartRecording = ()=>{\n        setRecordingDuration(0);\n        setCurrentPlaybackTime(0);\n        settotalDuration(0);\n        setRecordedAudio(null);\n        setIsRecording(true);\n        navigator.mediaDevices.getUserMedia({\n            audio: true\n        }).then((stream)=>{\n            const mediaRecorder = new MediaRecorder(stream);\n            mediaRecordedRed.current = mediaRecorder;\n            audioRef.current.srcObject = stream;\n            const chunk = [];\n            mediaRecorder.ondataavailable = (e)=>chunk.push(e.data);\n            mediaRecorder.onstop = ()=>{\n                const blob = new Blob(chunk, {\n                    type: \"audio/ogg; codecs=opus\"\n                });\n                const audioUrl = URL.createObjectURL(blob);\n                const audio = new Audio(audioUrl);\n                setRecordedAudio(audio);\n                waveForm.load(audioUrl);\n            };\n            mediaRecorder.start();\n        }).catch((error)=>{\n            console.error(error);\n        });\n    };\n    const handleStopRecording = ()=>{\n        if (mediaRecordedRed.current && isRecording) {\n            mediaRecordedRed.current.stop();\n            setIsRecording(false);\n            waveForm.stop();\n            const audioChunk = [];\n            mediaRecordedRed.current.addEventListener(\"dataavailable\", (event)=>{\n                const audioBlob = new Blob(audioChunk, {\n                    type: \"audio/mp3\"\n                });\n                const audioFile = new File([\n                    audioBlob\n                ], \"recording.mp3\");\n                setRenderedaudio(audioFile);\n            });\n        }\n    };\n    const handlePlayRecording = ()=>{\n        if (recordedAudio) {\n            waveForm.stop();\n            waveForm.play();\n            recordedAudio.play();\n            setIsPlaying(true);\n        }\n    };\n    const handlePauseRecording = ()=>{\n        waveForm.stop();\n        recordedAudio.pause();\n        setIsPlaying(false);\n    };\n    const sendRecording = async ()=>{\n        try {\n            const formData = new FormData();\n            formData.append(\"audio\", new Blob([\n                recordedAudio\n            ], {\n                type: \"audio/mp3\"\n            }), \"audio.mp3\");\n            // Mistake\n            // formData.append(\"audio\", renderedAudio);\n            const response = await axios__WEBPACK_IMPORTED_MODULE_5__[\"default\"].post(_utils_ApiRoutes__WEBPACK_IMPORTED_MODULE_2__.ADD_AUDIO_MESSAGE_ROUTE, formData, {\n                params: {\n                    from: userInfo.id,\n                    to: currentUser.id\n                }\n            });\n            if (response.status === 201) {\n                socket.current.emit(\"send-msg\", {\n                    senderId: userInfo.id,\n                    receiverId: currentUser.id,\n                    message: response.data.message.message,\n                    id: response.data.message.id,\n                    type: response.data.message.type,\n                    messageStatus: response.data.message.messageStatus,\n                    createdAt: response.data.message.createdAt\n                });\n                dispatch({\n                    type: \"ADD_MESSAGE\",\n                    newMessage: {\n                        ...response.data.message\n                    },\n                    fromSelf: true\n                });\n            }\n        } catch (err) {\n            console.error(err);\n        }\n    };\n    const formatTime = (time)=>{\n        if (isNaN(time)) return \"00:00\";\n        const minutes = Math.floor(time / 60);\n        const seconds = Math.floor(time % 60);\n        return \"\".concat(minutes.toString().padStart(2, \"0\"), \":\").concat(seconds.toString().padStart(2, \"0\"));\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex items-center justify-end w-full text-2xl\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"pt-1\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fa__WEBPACK_IMPORTED_MODULE_6__.FaTrash, {\n                    className: \"text-panel-header-icon\",\n                    onClick: ()=>hide()\n                }, void 0, false, {\n                    fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                    lineNumber: 201,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                lineNumber: 200,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center justify-center gap-3 px-4 py-2 mx-4 text-lg text-white rounded-full bg-search-input-container-background drop-shadow-lg\",\n                children: [\n                    isRecording ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center text-red-500 animate-pulse w-60\",\n                        children: [\n                            \"Recording \",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: [\n                                    recordingDuration,\n                                    \" s\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                                lineNumber: 206,\n                                columnNumber: 23\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                        lineNumber: 205,\n                        columnNumber: 11\n                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: recordedAudio && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                            children: !isPlaying ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fa__WEBPACK_IMPORTED_MODULE_6__.FaPlay, {\n                                onClick: handlePlayRecording\n                            }, void 0, false, {\n                                fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                                lineNumber: 213,\n                                columnNumber: 19\n                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fa__WEBPACK_IMPORTED_MODULE_6__.FaStop, {\n                                onClick: handlePauseRecording\n                            }, void 0, false, {\n                                fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                                lineNumber: 215,\n                                columnNumber: 19\n                            }, undefined)\n                        }, void 0, false)\n                    }, void 0, false, {\n                        fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                        lineNumber: 209,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-60\",\n                        ref: waveFormRef,\n                        hidden: isRecording,\n                        children: [\n                            recordedAudio && isRecording && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: formatTime(currentPlaybackTime)\n                            }, void 0, false, {\n                                fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                                lineNumber: 223,\n                                columnNumber: 13\n                            }, undefined),\n                            recordedAudio && !isPlaying && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: formatTime(totalDuration)\n                            }, void 0, false, {\n                                fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                                lineNumber: 226,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"audio\", {\n                                ref: audioRef,\n                                hidden: true\n                            }, void 0, false, {\n                                fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                                lineNumber: 228,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                        lineNumber: 221,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mr-4\",\n                        children: !isRecording ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fa__WEBPACK_IMPORTED_MODULE_6__.FaMicrophone, {\n                            className: \"text-red-500\",\n                            onClick: handleStartRecording\n                        }, void 0, false, {\n                            fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                            lineNumber: 232,\n                            columnNumber: 13\n                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fa__WEBPACK_IMPORTED_MODULE_6__.FaPauseCircle, {\n                            className: \"text-red-500\",\n                            onClick: handleStopRecording\n                        }, void 0, false, {\n                            fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                            lineNumber: 237,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                        lineNumber: 230,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_md__WEBPACK_IMPORTED_MODULE_7__.MdSend, {\n                            className: \"mr-4 cursor-pointer text-panel-header-icon \",\n                            title: \"send\",\n                            onClick: sendRecording\n                        }, void 0, false, {\n                            fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                            lineNumber: 244,\n                            columnNumber: 11\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                        lineNumber: 243,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n                lineNumber: 203,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/ps-devmonali/Vandit/whatsapp/client/src/components/common/CaptureAudio.jsx\",\n        lineNumber: 199,\n        columnNumber: 5\n    }, undefined);\n};\n_s(CaptureAudio, \"VZvavI9ruIGxay5d9TyA74bQMBs=\", false, function() {\n    return [\n        _context_StateContext__WEBPACK_IMPORTED_MODULE_1__.useStateProvider\n    ];\n});\n_c = CaptureAudio;\n/* harmony default export */ __webpack_exports__[\"default\"] = (CaptureAudio);\nvar _c;\n$RefreshReg$(_c, \"CaptureAudio\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jb21tb24vQ2FwdHVyZUF1ZGlvLmpzeC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQTBEO0FBQ0U7QUFDbEM7QUFDaUM7QUFPbkM7QUFDZ0I7QUFDRDtBQUV2QyxNQUFNYyxlQUFlLFNBQWM7UUFBYixFQUFFQyxLQUFJLEVBQUU7O0lBQzVCLE1BQU0sQ0FBQyxFQUFFQyxTQUFRLEVBQUVDLFlBQVcsRUFBRUMsT0FBTSxFQUFFLEVBQUVDLFNBQVMsR0FBR25CLHVFQUFnQkE7SUFFdEUsTUFBTSxDQUFDb0IsYUFBYUMsZUFBZSxHQUFHZiwrQ0FBUUEsQ0FBQyxLQUFLO0lBQ3BELE1BQU0sQ0FBQ2dCLGVBQWVDLGlCQUFpQixHQUFHakIsK0NBQVFBLENBQUMsSUFBSTtJQUN2RCxNQUFNLENBQUNrQixVQUFVQyxZQUFZLEdBQUduQiwrQ0FBUUEsQ0FBQyxJQUFJO0lBQzdDLE1BQU0sQ0FBQ29CLG1CQUFtQkMscUJBQXFCLEdBQUdyQiwrQ0FBUUEsQ0FBQztJQUMzRCxNQUFNLENBQUNzQixxQkFBcUJDLHVCQUF1QixHQUFHdkIsK0NBQVFBLENBQUM7SUFDL0QsTUFBTSxDQUFDd0IsZUFBZUMsaUJBQWlCLEdBQUd6QiwrQ0FBUUEsQ0FBQztJQUNuRCxNQUFNLENBQUMwQixXQUFXQyxhQUFhLEdBQUczQiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUM0QixlQUFlQyxpQkFBaUIsR0FBRzdCLCtDQUFRQSxDQUFDLElBQUk7SUFFdkQsTUFBTThCLFdBQVcvQiw2Q0FBTUE7SUFDdkIsTUFBTWdDLG1CQUFtQmhDLDZDQUFNQTtJQUMvQixNQUFNaUMsY0FBY2pDLDZDQUFNQTtJQUUxQkQsZ0RBQVNBLENBQUMsSUFBTTtRQUNkLElBQUltQztRQUNKLElBQUluQixhQUFhO1lBQ2ZtQixXQUFXQyxZQUFZLElBQU07Z0JBQzNCYixxQkFBcUIsQ0FBQ2MsZUFBaUI7b0JBQ3JDVixpQkFBaUJVLGVBQWU7b0JBQ2hDLE9BQU9BLGVBQWU7Z0JB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QUNBLDhEQUFDYix3REFBWUE7NEJBQ1h5SCxXQUFVOzRCQUNWQyxTQUFTdEU7Ozs7O3NEQUdYLDhEQUFDbkQseURBQWFBOzRCQUNad0gsV0FBVTs0QkFDVkMsU0FBUzFDOzs7OztxQ0FFWjs7Ozs7O2tDQUVILDhEQUFDd0M7a0NBQ0MsNEVBQUNuSCxrREFBTUE7NEJBQ0xvSCxXQUFVOzRCQUNWSyxPQUFNOzRCQUNOSixTQUFTL0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTXJCO0dBOU9NcEY7O1FBQ2tEZCxtRUFBZ0JBOzs7S0FEbEVjO0FBZ1BOLCtEQUFlQSxZQUFZQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9jb21wb25lbnRzL2NvbW1vbi9DYXB0dXJlQXVkaW8uanN4PzkzYTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGVQcm92aWRlciB9IGZyb20gXCJAL2NvbnRleHQvU3RhdGVDb250ZXh0XCI7XG5pbXBvcnQgeyBBRERfQVVESU9fTUVTU0FHRV9ST1VURSB9IGZyb20gXCJAL3V0aWxzL0FwaVJvdXRlc1wiO1xuaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtcbiAgRmFNaWNyb3Bob25lLFxuICBGYVBhdXNlQ2lyY2xlLFxuICBGYVBsYXksXG4gIEZhU3RvcCxcbiAgRmFUcmFzaCxcbn0gZnJvbSBcInJlYWN0LWljb25zL2ZhXCI7XG5pbXBvcnQgeyBNZFNlbmQgfSBmcm9tIFwicmVhY3QtaWNvbnMvbWRcIjtcbmltcG9ydCBXYXZlU3VyZmVyIGZyb20gXCJ3YXZlc3VyZmVyLmpzXCI7XG5cbmNvbnN0IENhcHR1cmVBdWRpbyA9ICh7IGhpZGUgfSkgPT4ge1xuICBjb25zdCBbeyB1c2VySW5mbywgY3VycmVudFVzZXIsIHNvY2tldCB9LCBkaXNwYXRjaF0gPSB1c2VTdGF0ZVByb3ZpZGVyKCk7XG5cbiAgY29uc3QgW2lzUmVjb3JkaW5nLCBzZXRJc1JlY29yZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtyZWNvcmRlZEF1ZGlvLCBzZXRSZWNvcmRlZEF1ZGlvXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbd2F2ZUZvcm0sIHNldFdhdmVGb3JtXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbcmVjb3JkaW5nRHVyYXRpb24sIHNldFJlY29yZGluZ0R1cmF0aW9uXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbY3VycmVudFBsYXliYWNrVGltZSwgc2V0Q3VycmVudFBsYXliYWNrVGltZV0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW3RvdGFsRHVyYXRpb24sIHNldHRvdGFsRHVyYXRpb25dID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtpc1BsYXlpbmcsIHNldElzUGxheWluZ10gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW3JlbmRlcmVkQXVkaW8sIHNldFJlbmRlcmVkYXVkaW9dID0gdXNlU3RhdGUobnVsbCk7XG5cbiAgY29uc3QgYXVkaW9SZWYgPSB1c2VSZWYoKTtcbiAgY29uc3QgbWVkaWFSZWNvcmRlZFJlZCA9IHVzZVJlZigpO1xuICBjb25zdCB3YXZlRm9ybVJlZiA9IHVzZVJlZigpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IGludGVydmFsO1xuICAgIGlmIChpc1JlY29yZGluZykge1xuICAgICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIHNldFJlY29yZGluZ0R1cmF0aW9uKChwcmV2RHVyYXRpb24pID0+IHtcbiAgICAgICAgICBzZXR0b3RhbER1cmF0aW9uKHByZXZEdXJhdGlvbiArIDEpO1xuICAgICAgICAgIHJldHVybiBwcmV2RHVyYXRpb24gKyAxO1xuICAgICAgICB9KTtcbiAgICAgIH0sIDEwMDApO1xuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICB9O1xuICB9LCBbaXNSZWNvcmRpbmddKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHdhdmVzdXJmZXIgPSBXYXZlU3VyZmVyLmNyZWF0ZSh7XG4gICAgICBjb250YWluZXI6IHdhdmVGb3JtUmVmLmN1cnJlbnQsXG4gICAgICB3YXZlQ29sb3I6IFwiI2NjY1wiLFxuICAgICAgcHJvZ3Jlc3NDb2xvcjogXCIjNGE5ZWZmXCIsXG4gICAgICBjdXJzb3JDb2xvcjogXCIjN2FlM2MzXCIsXG4gICAgICBiYXJXaWR0aDogMixcbiAgICAgIGhlaWdodDogMzAsXG4gICAgICByZXNwb25zaXZlOiB0cnVlLFxuICAgIH0pO1xuICAgIHNldFdhdmVGb3JtKHdhdmVzdXJmZXIpO1xuXG4gICAgd2F2ZXN1cmZlci5vbihcImZpbmlzaFwiLCAoKSA9PiB7XG4gICAgICBzZXRJc1BsYXlpbmcoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdhdmVzdXJmZXIuZGVzdHJveSgpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyZWNvcmRlZEF1ZGlvKSB7XG4gICAgICBjb25zdCB1cGRhdGVQbGF5YmFja1RpbWUgPSAoKSA9PiB7XG4gICAgICAgIHNldEN1cnJlbnRQbGF5YmFja1RpbWUocmVjb3JkZWRBdWRpby5jdXJyZW50VGltZSk7XG4gICAgICB9O1xuICAgICAgcmVjb3JkZWRBdWRpby5hZGRFdmVudExpc3RlbmVyKFwidGltZXVwZGF0ZVwiLCB1cGRhdGVQbGF5YmFja1RpbWUpO1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgcmVjb3JkZWRBdWRpby5yZW1vdmVFdmVudExpc3RlbmVyKFwidGltZXVwZGF0ZVwiLCB1cGRhdGVQbGF5YmFja1RpbWUpO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIFtyZWNvcmRlZEF1ZGlvXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAod2F2ZUZvcm0pIGhhbmRsZVN0YXJ0UmVjb3JkaW5nKCk7XG4gIH0sIFt3YXZlRm9ybV0pO1xuXG4gIGNvbnN0IGhhbmRsZVN0YXJ0UmVjb3JkaW5nID0gKCkgPT4ge1xuICAgIHNldFJlY29yZGluZ0R1cmF0aW9uKDApO1xuICAgIHNldEN1cnJlbnRQbGF5YmFja1RpbWUoMCk7XG4gICAgc2V0dG90YWxEdXJhdGlvbigwKTtcbiAgICBzZXRSZWNvcmRlZEF1ZGlvKG51bGwpO1xuICAgIHNldElzUmVjb3JkaW5nKHRydWUpO1xuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXNcbiAgICAgIC5nZXRVc2VyTWVkaWEoeyBhdWRpbzogdHJ1ZSB9KVxuICAgICAgLnRoZW4oKHN0cmVhbSkgPT4ge1xuICAgICAgICBjb25zdCBtZWRpYVJlY29yZGVyID0gbmV3IE1lZGlhUmVjb3JkZXIoc3RyZWFtKTtcbiAgICAgICAgbWVkaWFSZWNvcmRlZFJlZC5jdXJyZW50ID0gbWVkaWFSZWNvcmRlcjtcbiAgICAgICAgYXVkaW9SZWYuY3VycmVudC5zcmNPYmplY3QgPSBzdHJlYW07XG5cbiAgICAgICAgY29uc3QgY2h1bmsgPSBbXTtcbiAgICAgICAgbWVkaWFSZWNvcmRlci5vbmRhdGFhdmFpbGFibGUgPSAoZSkgPT4gY2h1bmsucHVzaChlLmRhdGEpO1xuICAgICAgICBtZWRpYVJlY29yZGVyLm9uc3RvcCA9ICgpID0+IHtcbiAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoY2h1bmssIHsgdHlwZTogXCJhdWRpby9vZ2c7IGNvZGVjcz1vcHVzXCIgfSk7XG4gICAgICAgICAgY29uc3QgYXVkaW9VcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKGF1ZGlvVXJsKTtcbiAgICBcbiAgICAgICAgICBzZXRSZWNvcmRlZEF1ZGlvKGF1ZGlvKTtcbiAgICAgICAgICB3YXZlRm9ybS5sb2FkKGF1ZGlvVXJsKTtcbiAgICAgICAgfTtcbiAgICAgICAgbWVkaWFSZWNvcmRlci5zdGFydCgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICB9KTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVTdG9wUmVjb3JkaW5nID0gKCkgPT4ge1xuICAgIGlmIChtZWRpYVJlY29yZGVkUmVkLmN1cnJlbnQgJiYgaXNSZWNvcmRpbmcpIHtcbiAgICAgIG1lZGlhUmVjb3JkZWRSZWQuY3VycmVudC5zdG9wKCk7XG4gICAgICBzZXRJc1JlY29yZGluZyhmYWxzZSk7XG4gICAgICB3YXZlRm9ybS5zdG9wKCk7XG5cbiAgICAgIGNvbnN0IGF1ZGlvQ2h1bmsgPSBbXTtcbiAgICAgIG1lZGlhUmVjb3JkZWRSZWQuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKFwiZGF0YWF2YWlsYWJsZVwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgYXVkaW9CbG9iID0gbmV3IEJsb2IoYXVkaW9DaHVuaywgeyB0eXBlOiBcImF1ZGlvL21wM1wiIH0pO1xuICAgICAgICBjb25zdCBhdWRpb0ZpbGUgPSBuZXcgRmlsZShbYXVkaW9CbG9iXSwgXCJyZWNvcmRpbmcubXAzXCIpO1xuICAgICAgICBzZXRSZW5kZXJlZGF1ZGlvKGF1ZGlvRmlsZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUGxheVJlY29yZGluZyA9ICgpID0+IHtcbiAgICBpZiAocmVjb3JkZWRBdWRpbykge1xuICAgICAgd2F2ZUZvcm0uc3RvcCgpO1xuICAgICAgd2F2ZUZvcm0ucGxheSgpO1xuICAgICAgcmVjb3JkZWRBdWRpby5wbGF5KCk7XG4gICAgICBzZXRJc1BsYXlpbmcodHJ1ZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVBhdXNlUmVjb3JkaW5nID0gKCkgPT4ge1xuICAgIHdhdmVGb3JtLnN0b3AoKTtcbiAgICByZWNvcmRlZEF1ZGlvLnBhdXNlKCk7XG4gICAgc2V0SXNQbGF5aW5nKGZhbHNlKTtcbiAgfTtcblxuICBjb25zdCBzZW5kUmVjb3JkaW5nID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGZvcm1EYXRhLmFwcGVuZChcbiAgICAgIFwiYXVkaW9cIixcbiAgICAgIG5ldyBCbG9iKFtyZWNvcmRlZEF1ZGlvXSwgeyB0eXBlOiBcImF1ZGlvL21wM1wiIH0pLFxuICAgICAgXCJhdWRpby5tcDNcIlxuICAgICk7XG5cblxuICAgICAgLy8gTWlzdGFrZVxuXG4gICAgICAvLyBmb3JtRGF0YS5hcHBlbmQoXCJhdWRpb1wiLCByZW5kZXJlZEF1ZGlvKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KEFERF9BVURJT19NRVNTQUdFX1JPVVRFLCBmb3JtRGF0YSwge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBmcm9tOiB1c2VySW5mby5pZCxcbiAgICAgICAgICB0bzogY3VycmVudFVzZXIuaWQsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAxKSB7XG4gICAgICAgIHNvY2tldC5jdXJyZW50LmVtaXQoXCJzZW5kLW1zZ1wiLCB7XG4gICAgICAgICAgc2VuZGVySWQ6IHVzZXJJbmZvLmlkLFxuICAgICAgICAgIHJlY2VpdmVySWQ6IGN1cnJlbnRVc2VyLmlkLFxuICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5tZXNzYWdlLFxuICAgICAgICAgIGlkOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuaWQsXG4gICAgICAgICAgdHlwZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLnR5cGUsXG4gICAgICAgICAgbWVzc2FnZVN0YXR1czogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLm1lc3NhZ2VTdGF0dXMsXG4gICAgICAgICAgY3JlYXRlZEF0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuY3JlYXRlZEF0LFxuICAgICAgICB9KTtcblxuICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgdHlwZTogXCJBRERfTUVTU0FHRVwiLFxuICAgICAgICAgIG5ld01lc3NhZ2U6IHtcbiAgICAgICAgICAgIC4uLnJlc3BvbnNlLmRhdGEubWVzc2FnZSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZyb21TZWxmOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZm9ybWF0VGltZSA9ICh0aW1lKSA9PiB7XG4gICAgaWYgKGlzTmFOKHRpbWUpKSByZXR1cm4gXCIwMDowMFwiO1xuICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHRpbWUgLyA2MCk7XG4gICAgY29uc3Qgc2Vjb25kcyA9IE1hdGguZmxvb3IodGltZSAlIDYwKTtcbiAgICByZXR1cm4gYCR7bWludXRlcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX06JHtzZWNvbmRzXG4gICAgICAudG9TdHJpbmcoKVxuICAgICAgLnBhZFN0YXJ0KDIsIFwiMFwiKX1gO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWVuZCB3LWZ1bGwgdGV4dC0yeGxcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHQtMVwiPlxuICAgICAgICA8RmFUcmFzaCBjbGFzc05hbWU9XCJ0ZXh0LXBhbmVsLWhlYWRlci1pY29uXCIgb25DbGljaz17KCkgPT4gaGlkZSgpfSAvPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0zIHB4LTQgcHktMiBteC00IHRleHQtbGcgdGV4dC13aGl0ZSByb3VuZGVkLWZ1bGwgYmctc2VhcmNoLWlucHV0LWNvbnRhaW5lci1iYWNrZ3JvdW5kIGRyb3Atc2hhZG93LWxnXCI+XG4gICAgICAgIHtpc1JlY29yZGluZyA/IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHRleHQtcmVkLTUwMCBhbmltYXRlLXB1bHNlIHctNjBcIj5cbiAgICAgICAgICAgIFJlY29yZGluZyA8c3Bhbj57cmVjb3JkaW5nRHVyYXRpb259IHM8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIHtyZWNvcmRlZEF1ZGlvICYmIChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICB7IWlzUGxheWluZyA/IChcbiAgICAgICAgICAgICAgICAgIDxGYVBsYXkgb25DbGljaz17aGFuZGxlUGxheVJlY29yZGluZ30gLz5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPEZhU3RvcCBvbkNsaWNrPXtoYW5kbGVQYXVzZVJlY29yZGluZ30gLz5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy02MFwiIHJlZj17d2F2ZUZvcm1SZWZ9IGhpZGRlbj17aXNSZWNvcmRpbmd9PlxuICAgICAgICAgIHtyZWNvcmRlZEF1ZGlvICYmIGlzUmVjb3JkaW5nICYmIChcbiAgICAgICAgICAgIDxzcGFuPntmb3JtYXRUaW1lKGN1cnJlbnRQbGF5YmFja1RpbWUpfTwvc3Bhbj5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtyZWNvcmRlZEF1ZGlvICYmICFpc1BsYXlpbmcgJiYgKFxuICAgICAgICAgICAgPHNwYW4+e2Zvcm1hdFRpbWUodG90YWxEdXJhdGlvbil9PC9zcGFuPlxuICAgICAgICAgICl9XG4gICAgICAgICAgPGF1ZGlvIHJlZj17YXVkaW9SZWZ9IGhpZGRlbiAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtci00XCI+XG4gICAgICAgICAgeyFpc1JlY29yZGluZyA/IChcbiAgICAgICAgICAgIDxGYU1pY3JvcGhvbmVcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1yZWQtNTAwXCJcbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU3RhcnRSZWNvcmRpbmd9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8RmFQYXVzZUNpcmNsZVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXJlZC01MDBcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVTdG9wUmVjb3JkaW5nfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TWRTZW5kXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJtci00IGN1cnNvci1wb2ludGVyIHRleHQtcGFuZWwtaGVhZGVyLWljb24gXCJcbiAgICAgICAgICAgIHRpdGxlPVwic2VuZFwiXG4gICAgICAgICAgICBvbkNsaWNrPXtzZW5kUmVjb3JkaW5nfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDYXB0dXJlQXVkaW87XG4iXSwibmFtZXMiOlsidXNlU3RhdGVQcm92aWRlciIsIkFERF9BVURJT19NRVNTQUdFX1JPVVRFIiwiYXhpb3MiLCJSZWFjdCIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwiRmFNaWNyb3Bob25lIiwiRmFQYXVzZUNpcmNsZSIsIkZhUGxheSIsIkZhU3RvcCIsIkZhVHJhc2giLCJNZFNlbmQiLCJXYXZlU3VyZmVyIiwiQ2FwdHVyZUF1ZGlvIiwiaGlkZSIsInVzZXJJbmZvIiwiY3VycmVudFVzZXIiLCJzb2NrZXQiLCJkaXNwYXRjaCIsImlzUmVjb3JkaW5nIiwic2V0SXNSZWNvcmRpbmciLCJyZWNvcmRlZEF1ZGlvIiwic2V0UmVjb3JkZWRBdWRpbyIsIndhdmVGb3JtIiwic2V0V2F2ZUZvcm0iLCJyZWNvcmRpbmdEdXJhdGlvbiIsInNldFJlY29yZGluZ0R1cmF0aW9uIiwiY3VycmVudFBsYXliYWNrVGltZSIsInNldEN1cnJlbnRQbGF5YmFja1RpbWUiLCJ0b3RhbER1cmF0aW9uIiwic2V0dG90YWxEdXJhdGlvbiIsImlzUGxheWluZyIsInNldElzUGxheWluZyIsInJlbmRlcmVkQXVkaW8iLCJzZXRSZW5kZXJlZGF1ZGlvIiwiYXVkaW9SZWYiLCJtZWRpYVJlY29yZGVkUmVkIiwid2F2ZUZvcm1SZWYiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwicHJldkR1cmF0aW9uIiwiY2xlYXJJbnRlcnZhbCIsIndhdmVzdXJmZXIiLCJjcmVhdGUiLCJjb250YWluZXIiLCJjdXJyZW50Iiwid2F2ZUNvbG9yIiwicHJvZ3Jlc3NDb2xvciIsImN1cnNvckNvbG9yIiwiYmFyV2lkdGgiLCJoZWlnaHQiLCJyZXNwb25zaXZlIiwib24iLCJkZXN0cm95IiwidXBkYXRlUGxheWJhY2tUaW1lIiwiY3VycmVudFRpbWUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZVN0YXJ0UmVjb3JkaW5nIiwibmF2aWdhdG9yIiwibWVkaWFEZXZpY2VzIiwiZ2V0VXNlck1lZGlhIiwiYXVkaW8iLCJ0aGVuIiwic3RyZWFtIiwibWVkaWFSZWNvcmRlciIsIk1lZGlhUmVjb3JkZXIiLCJzcmNPYmplY3QiLCJjaHVuayIsIm9uZGF0YWF2YWlsYWJsZSIsImUiLCJwdXNoIiwiZGF0YSIsIm9uc3RvcCIsImJsb2IiLCJCbG9iIiwidHlwZSIsImF1ZGlvVXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiQXVkaW8iLCJsb2FkIiwic3RhcnQiLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImhhbmRsZVN0b3BSZWNvcmRpbmciLCJzdG9wIiwiYXVkaW9DaHVuayIsImV2ZW50IiwiYXVkaW9CbG9iIiwiYXVkaW9GaWxlIiwiRmlsZSIsImhhbmRsZVBsYXlSZWNvcmRpbmciLCJwbGF5IiwiaGFuZGxlUGF1c2VSZWNvcmRpbmciLCJwYXVzZSIsInNlbmRSZWNvcmRpbmciLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwicmVzcG9uc2UiLCJwb3N0IiwicGFyYW1zIiwiZnJvbSIsImlkIiwidG8iLCJzdGF0dXMiLCJlbWl0Iiwic2VuZGVySWQiLCJyZWNlaXZlcklkIiwibWVzc2FnZSIsIm1lc3NhZ2VTdGF0dXMiLCJjcmVhdGVkQXQiLCJuZXdNZXNzYWdlIiwiZnJvbVNlbGYiLCJlcnIiLCJmb3JtYXRUaW1lIiwidGltZSIsImlzTmFOIiwibWludXRlcyIsIk1hdGgiLCJmbG9vciIsInNlY29uZHMiLCJ0b1N0cmluZyIsInBhZFN0YXJ0IiwiZGl2IiwiY2xhc3NOYW1lIiwib25DbGljayIsInNwYW4iLCJyZWYiLCJoaWRkZW4iLCJ0aXRsZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/common/CaptureAudio.jsx\n"));

/***/ }),

/***/ "./node_modules/wavesurfer.js/dist/wavesurfer.esm.js":
/*!***********************************************************!*\
  !*** ./node_modules/wavesurfer.js/dist/wavesurfer.esm.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ u; }\n/* harmony export */ });\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nfunction t(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{h(n.next(t))}catch(t){r(t)}}function a(t){try{h(n.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))}class e{constructor(){this.listeners={}}on(t,e,i){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(e),null==i?void 0:i.once){const i=()=>{this.un(t,i),this.un(t,e)};return this.on(t,i),i}return()=>this.un(t,e)}un(t,e){var i;null===(i=this.listeners[t])||void 0===i||i.delete(e)}once(t,e){return this.on(t,e,{once:!0})}unAll(){this.listeners={}}emit(t,...e){this.listeners[t]&&this.listeners[t].forEach((t=>t(...e)))}}const i={decode:function(e,i){return t(this,void 0,void 0,(function*(){const t=new AudioContext({sampleRate:i});return t.decodeAudioData(e).finally((()=>t.close()))}))},createBuffer:function(t,e){return\"number\"==typeof t[0]&&(t=[t]),function(t){const e=t[0];if(e.some((t=>t>1||t<-1))){const i=e.length;let n=0;for(let t=0;t<i;t++){const i=Math.abs(e[t]);i>n&&(n=i)}for(const e of t)for(let t=0;t<i;t++)e[t]/=n}}(t),{duration:e,length:t[0].length,sampleRate:t[0].length/e,numberOfChannels:t.length,getChannelData:e=>null==t?void 0:t[e],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function n(t,e){const i=e.xmlns?document.createElementNS(e.xmlns,t):document.createElement(t);for(const[t,s]of Object.entries(e))if(\"children\"===t)for(const[t,s]of Object.entries(e))\"string\"==typeof s?i.appendChild(document.createTextNode(s)):i.appendChild(n(t,s));else\"style\"===t?Object.assign(i.style,s):\"textContent\"===t?i.textContent=s:i.setAttribute(t,s.toString());return i}function s(t,e,i){const s=n(t,e||{});return null==i||i.appendChild(s),s}var r=Object.freeze({__proto__:null,createElement:s,default:s});const o={fetchBlob:function(e,i,n){return t(this,void 0,void 0,(function*(){const s=yield fetch(e,n);if(s.status>=400)throw new Error(`Failed to fetch ${e}: ${s.status} (${s.statusText})`);return function(e,i){t(this,void 0,void 0,(function*(){if(!e.body||!e.headers)return;const n=e.body.getReader(),s=Number(e.headers.get(\"Content-Length\"))||0;let r=0;const o=e=>t(this,void 0,void 0,(function*(){r+=(null==e?void 0:e.length)||0;const t=Math.round(r/s*100);i(t)})),a=()=>t(this,void 0,void 0,(function*(){let t;try{t=yield n.read()}catch(t){return}t.done||(o(t.value),yield a())}));a()}))}(s.clone(),i),s.blob()}))}};class a extends e{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement(\"audio\"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),null!=t.playbackRate&&this.onceMediaEvent(\"canplay\",(()=>{null!=t.playbackRate&&(this.media.playbackRate=t.playbackRate)}))}onMediaEvent(t,e,i){return this.media.addEventListener(t,e,i),()=>this.media.removeEventListener(t,e)}onceMediaEvent(t,e){return this.onMediaEvent(t,e,{once:!0})}getSrc(){return this.media.currentSrc||this.media.src||\"\"}revokeSrc(){const t=this.getSrc();t.startsWith(\"blob:\")&&URL.revokeObjectURL(t)}canPlayType(t){return\"\"!==this.media.canPlayType(t)}setSrc(t,e){if(this.getSrc()===t)return;this.revokeSrc();const i=e instanceof Blob&&this.canPlayType(e.type)?URL.createObjectURL(e):t;this.media.src=i}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src=\"\",this.media.load())}setMediaElement(t){this.media=t}play(){return t(this,void 0,void 0,(function*(){if(this.media.src)return this.media.play()}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,e){null!=e&&(this.media.preservesPitch=e),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}class h extends e{constructor(t,e){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.options=t;const i=this.parentFromOptionsContainer(t.container);this.parent=i;const[n,s]=this.initHtml();i.appendChild(n),this.container=n,this.scrollContainer=s.querySelector(\".scroll\"),this.wrapper=s.querySelector(\".wrapper\"),this.canvasWrapper=s.querySelector(\".canvases\"),this.progressWrapper=s.querySelector(\".progress\"),this.cursor=s.querySelector(\".cursor\"),e&&s.appendChild(e),this.initEvents()}parentFromOptionsContainer(t){let e;if(\"string\"==typeof t?e=document.querySelector(t):t instanceof HTMLElement&&(e=t),!e)throw new Error(\"Container not found\");return e}initEvents(){const t=t=>{const e=this.wrapper.getBoundingClientRect(),i=t.clientX-e.left,n=t.clientX-e.left;return[i/e.width,n/e.height]};this.wrapper.addEventListener(\"click\",(e=>{const[i,n]=t(e);this.emit(\"click\",i,n)})),this.wrapper.addEventListener(\"dblclick\",(e=>{const[i,n]=t(e);this.emit(\"dblclick\",i,n)})),this.options.dragToSeek&&this.initDrag(),this.scrollContainer.addEventListener(\"scroll\",(()=>{const{scrollLeft:t,scrollWidth:e,clientWidth:i}=this.scrollContainer,n=t/e,s=(t+i)/e;this.emit(\"scroll\",n,s)}));const e=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{e().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&\"auto\"!==this.options.height||(this.lastContainerWidth=t,this.reRender())}initDrag(){!function(t,e,i,n,s=3,r=0){if(!t)return()=>{};let o=()=>{};const a=a=>{if(a.button!==r)return;a.preventDefault(),a.stopPropagation();let h=a.clientX,l=a.clientY,d=!1;const c=n=>{n.preventDefault(),n.stopPropagation();const r=n.clientX,o=n.clientY,a=r-h,c=o-l;if(d||Math.abs(a)>s||Math.abs(c)>s){const n=t.getBoundingClientRect(),{left:s,top:u}=n;d||(null==i||i(h-s,l-u),d=!0),e(a,c,r-s,o-u),h=r,l=o}},u=()=>{d&&(null==n||n()),o()},p=t=>{t.relatedTarget&&t.relatedTarget!==document.documentElement||u()},m=t=>{d&&(t.stopPropagation(),t.preventDefault())},f=t=>{d&&t.preventDefault()};document.addEventListener(\"pointermove\",c),document.addEventListener(\"pointerup\",u),document.addEventListener(\"pointerout\",p),document.addEventListener(\"pointercancel\",p),document.addEventListener(\"touchmove\",f,{passive:!1}),document.addEventListener(\"click\",m,{capture:!0}),o=()=>{document.removeEventListener(\"pointermove\",c),document.removeEventListener(\"pointerup\",u),document.removeEventListener(\"pointerout\",p),document.removeEventListener(\"pointercancel\",p),document.removeEventListener(\"touchmove\",f),setTimeout((()=>{document.removeEventListener(\"click\",m,{capture:!0})}),10)}};t.addEventListener(\"pointerdown\",a)}(this.wrapper,((t,e,i)=>{this.emit(\"drag\",Math.max(0,Math.min(1,i/this.wrapper.getBoundingClientRect().width)))}),(()=>this.isDragging=!0),(()=>this.isDragging=!1))}getHeight(t){return null==t?128:isNaN(Number(t))?\"auto\"===t&&this.parent.clientHeight||128:Number(t)}initHtml(){const t=document.createElement(\"div\"),e=t.attachShadow({mode:\"open\"});return e.innerHTML=`\\n      <style>\\n        :host {\\n          user-select: none;\\n          min-width: 1px;\\n        }\\n        :host audio {\\n          display: block;\\n          width: 100%;\\n        }\\n        :host .scroll {\\n          overflow-x: auto;\\n          overflow-y: hidden;\\n          width: 100%;\\n          position: relative;\\n        }\\n        :host .noScrollbar {\\n          scrollbar-color: transparent;\\n          scrollbar-width: none;\\n        }\\n        :host .noScrollbar::-webkit-scrollbar {\\n          display: none;\\n          -webkit-appearance: none;\\n        }\\n        :host .wrapper {\\n          position: relative;\\n          overflow: visible;\\n          z-index: 2;\\n        }\\n        :host .canvases {\\n          min-height: ${this.getHeight(this.options.height)}px;\\n        }\\n        :host .canvases > div {\\n          position: relative;\\n        }\\n        :host canvas {\\n          display: block;\\n          position: absolute;\\n          top: 0;\\n          image-rendering: pixelated;\\n        }\\n        :host .progress {\\n          pointer-events: none;\\n          position: absolute;\\n          z-index: 2;\\n          top: 0;\\n          left: 0;\\n          width: 0;\\n          height: 100%;\\n          overflow: hidden;\\n        }\\n        :host .progress > div {\\n          position: relative;\\n        }\\n        :host .cursor {\\n          pointer-events: none;\\n          position: absolute;\\n          z-index: 5;\\n          top: 0;\\n          left: 0;\\n          height: 100%;\\n          border-radius: 2px;\\n        }\\n      </style>\\n\\n      <div class=\"scroll\" part=\"scroll\">\\n        <div class=\"wrapper\" part=\"wrapper\">\\n          <div class=\"canvases\"></div>\\n          <div class=\"progress\" part=\"progress\"></div>\\n          <div class=\"cursor\" part=\"cursor\"></div>\\n        </div>\\n      </div>\\n    `,[t,e]}setOptions(t){if(this.options.container!==t.container){const e=this.parentFromOptionsContainer(t.container);e.appendChild(this.container),this.parent=e}t.dragToSeek&&!this.options.dragToSeek&&this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}destroy(){var t;this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect()}createDelay(t=10){let e,i;const n=()=>{e&&clearTimeout(e),i&&i()};return this.timeouts.push(n),()=>new Promise(((s,r)=>{n(),i=r,e=setTimeout((()=>{e=void 0,i=void 0,s()}),t)}))}convertColorValues(t){if(!Array.isArray(t))return t||\"\";if(t.length<2)return t[0]||\"\";const e=document.createElement(\"canvas\"),i=e.getContext(\"2d\"),n=e.height*(window.devicePixelRatio||1),s=i.createLinearGradient(0,0,0,n),r=1/(t.length-1);return t.forEach(((t,e)=>{const i=e*r;s.addColorStop(i,t)})),s}renderBarWaveform(t,e,i,n){const s=t[0],r=t[1]||t[0],o=s.length,{width:a,height:h}=i.canvas,l=h/2,d=window.devicePixelRatio||1,c=e.barWidth?e.barWidth*d:1,u=e.barGap?e.barGap*d:e.barWidth?c/2:0,p=e.barRadius||0,m=a/(c+u)/o,f=p&&\"roundRect\"in i?\"roundRect\":\"rect\";i.beginPath();let g=0,v=0,b=0;for(let t=0;t<=o;t++){const o=Math.round(t*m);if(o>g){const t=Math.round(v*l*n),s=t+Math.round(b*l*n)||1;let r=l-t;\"top\"===e.barAlign?r=0:\"bottom\"===e.barAlign&&(r=h-s),i[f](g*(c+u),r,c,s,p),g=o,v=0,b=0}const a=Math.abs(s[t]||0),d=Math.abs(r[t]||0);a>v&&(v=a),d>b&&(b=d)}i.fill(),i.closePath()}renderLineWaveform(t,e,i,n){const s=e=>{const s=t[e]||t[0],r=s.length,{height:o}=i.canvas,a=o/2,h=i.canvas.width/r;i.moveTo(0,a);let l=0,d=0;for(let t=0;t<=r;t++){const r=Math.round(t*h);if(r>l){const t=a+(Math.round(d*a*n)||1)*(0===e?-1:1);i.lineTo(l,t),l=r,d=0}const o=Math.abs(s[t]||0);o>d&&(d=o)}i.lineTo(l,a)};i.beginPath(),s(0),s(1),i.fill(),i.closePath()}renderWaveform(t,e,i){if(i.fillStyle=this.convertColorValues(e.waveColor),e.renderFunction)return void e.renderFunction(t,i);let n=e.barHeight||1;if(e.normalize){const e=Array.from(t[0]).reduce(((t,e)=>Math.max(t,Math.abs(e))),0);n=e?1/e:1}e.barWidth||e.barGap||e.barAlign?this.renderBarWaveform(t,e,i,n):this.renderLineWaveform(t,e,i,n)}renderSingleCanvas(t,e,i,n,s,r,o,a){const h=window.devicePixelRatio||1,l=document.createElement(\"canvas\"),d=t[0].length;l.width=Math.round(i*(r-s)/d),l.height=n*h,l.style.width=`${Math.floor(l.width/h)}px`,l.style.height=`${n}px`,l.style.left=`${Math.floor(s*i/h/d)}px`,o.appendChild(l);const c=l.getContext(\"2d\");if(this.renderWaveform(t.map((t=>t.slice(s,r))),e,c),l.width>0&&l.height>0){const t=l.cloneNode(),i=t.getContext(\"2d\");i.drawImage(l,0,0),i.globalCompositeOperation=\"source-in\",i.fillStyle=this.convertColorValues(e.progressColor),i.fillRect(0,0,l.width,l.height),a.appendChild(t)}}renderChannel(e,i,n){return t(this,void 0,void 0,(function*(){const s=document.createElement(\"div\"),r=this.getHeight(i.height);s.style.height=`${r}px`,this.canvasWrapper.style.minHeight=`${r}px`,this.canvasWrapper.appendChild(s);const o=s.cloneNode();this.progressWrapper.appendChild(o);const a=e[0].length,l=(t,h)=>{this.renderSingleCanvas(e,i,n,r,Math.max(0,t),Math.min(h,a),s,o)};if(!this.isScrollable)return void l(0,a);const{scrollLeft:d,scrollWidth:c,clientWidth:u}=this.scrollContainer,p=a/c;let m=Math.min(h.MAX_CANVAS_WIDTH,u);if(i.barWidth||i.barGap){const t=i.barWidth||.5,e=t+(i.barGap||t/2);m%e!=0&&(m=Math.floor(m/e)*e)}const f=Math.floor(Math.abs(d)*p),g=Math.floor(f+m*p),v=g-f;v<=0||(l(f,g),yield Promise.all([(()=>t(this,void 0,void 0,(function*(){if(0===f)return;const t=this.createDelay();for(let e=f;e>=0;e-=v)yield t(),l(Math.max(0,e-v),e)})))(),(()=>t(this,void 0,void 0,(function*(){if(g===a)return;const t=this.createDelay();for(let e=g;e<a;e+=v)yield t(),l(e,Math.min(a,e+v))})))()]))}))}render(e){return t(this,void 0,void 0,(function*(){this.timeouts.forEach((t=>t())),this.timeouts=[],this.canvasWrapper.innerHTML=\"\",this.progressWrapper.innerHTML=\"\",null!=this.options.width&&(this.scrollContainer.style.width=\"number\"==typeof this.options.width?`${this.options.width}px`:this.options.width);const t=window.devicePixelRatio||1,i=this.scrollContainer.clientWidth,n=Math.ceil(e.duration*(this.options.minPxPerSec||0));this.isScrollable=n>i;const s=this.options.fillParent&&!this.isScrollable,r=(s?i:n)*t;this.wrapper.style.width=s?\"100%\":`${n}px`,this.scrollContainer.style.overflowX=this.isScrollable?\"auto\":\"hidden\",this.scrollContainer.classList.toggle(\"noScrollbar\",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit(\"render\");try{if(this.options.splitChannels)yield Promise.all(Array.from({length:e.numberOfChannels}).map(((t,i)=>{var n;const s=Object.assign(Object.assign({},this.options),null===(n=this.options.splitChannels)||void 0===n?void 0:n[i]);return this.renderChannel([e.getChannelData(i)],s,r)})));else{const t=[e.getChannelData(0)];e.numberOfChannels>1&&t.push(e.getChannelData(1)),yield this.renderChannel(t,this.options,r)}}catch(t){return}this.emit(\"rendered\")}))}reRender(){if(!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:e}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:t}=this.progressWrapper.getBoundingClientRect();let i=t-e;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,e=!1){const{scrollLeft:i,scrollWidth:n,clientWidth:s}=this.scrollContainer,r=t*n,o=i,a=i+s,h=s/2;if(this.isDragging){const t=30;r+t>a?this.scrollContainer.scrollLeft+=t:r-t<o&&(this.scrollContainer.scrollLeft-=t)}else{(r<o||r>a)&&(this.scrollContainer.scrollLeft=r-(this.options.autoCenter?h:0));const t=r-i-h;e&&this.options.autoCenter&&t>0&&(this.scrollContainer.scrollLeft+=Math.min(t,10))}{const t=this.scrollContainer.scrollLeft,e=t/n,i=(t+s)/n;this.emit(\"scroll\",e,i)}}renderProgress(t,e){if(isNaN(t))return;const i=100*t;this.canvasWrapper.style.clipPath=`polygon(${i}% 0, 100% 0, 100% 100%, ${i}% 100%)`,this.progressWrapper.style.width=`${i}%`,this.cursor.style.left=`${i}%`,this.cursor.style.transform=`translateX(-${100===Math.round(i)?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,e)}exportImage(e,i,n){return t(this,void 0,void 0,(function*(){const t=this.canvasWrapper.querySelectorAll(\"canvas\");if(!t.length)throw new Error(\"No waveform data\");if(\"dataURL\"===n){const n=Array.from(t).map((t=>t.toDataURL(e,i)));return Promise.resolve(n)}return Promise.all(Array.from(t).map((t=>new Promise(((n,s)=>{t.toBlob((t=>{t?n(t):s(new Error(\"Could not export image\"))}),e,i)})))))}))}}h.MAX_CANVAS_WIDTH=4e3;class l extends e{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on(\"tick\",(()=>{requestAnimationFrame((()=>{this.emit(\"tick\")}))})),this.emit(\"tick\")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class d extends e{constructor(t=new AudioContext){super(),this.bufferNode=null,this.autoplay=!1,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this.buffer=null,this.currentSrc=\"\",this.paused=!0,this.crossOrigin=null,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return t(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,!t)return this.buffer=null,void this.emit(\"emptied\");fetch(t).then((t=>t.arrayBuffer())).then((e=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(e))).then((e=>{this.currentSrc===t&&(this.buffer=e,this.emit(\"loadedmetadata\"),this.emit(\"canplay\"),this.autoplay&&this.play())}))}_play(){var t;this.paused&&(this.paused=!1,null===(t=this.bufferNode)||void 0===t||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.bufferNode.buffer=this.buffer,this.bufferNode.connect(this.gainNode),this.playedDuration>=this.duration&&(this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,this.playedDuration),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit(\"ended\"))})}_pause(){var t;this.paused||(this.paused=!0,null===(t=this.bufferNode)||void 0===t||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime)}play(){return t(this,void 0,void 0,(function*(){this._play(),this.emit(\"play\")}))}pause(){this._pause(),this.emit(\"pause\")}stopAt(t){var e,i;const n=t-this.currentTime;null===(e=this.bufferNode)||void 0===e||e.stop(this.audioContext.currentTime+n),null===(i=this.bufferNode)||void 0===i||i.addEventListener(\"ended\",(()=>{this.bufferNode=null,this.pause()}),{once:!0})}setSinkId(e){return t(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){var t,e;return null!==(e=null===(t=this.bufferNode)||void 0===t?void 0:t.playbackRate.value)&&void 0!==e?e:1}set playbackRate(t){this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return this.paused?this.playedDuration:this.playedDuration+this.audioContext.currentTime-this.playStartTime}set currentTime(t){this.emit(\"seeking\"),this.paused?this.playedDuration=t:(this._pause(),this.playedDuration=t,this._play()),this.emit(\"timeupdate\")}get duration(){var t;return(null===(t=this.buffer)||void 0===t?void 0:t.duration)||0}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit(\"volumechange\")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const e=this.buffer.numberOfChannels;for(let i=0;i<e;i++)t.push(this.buffer.getChannelData(i));return t}}const c={waveColor:\"#999\",progressColor:\"#555\",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class u extends a{static create(t){return new u(t)}constructor(t){const e=t.media||(\"WebAudio\"===t.backend?new d:void 0);super({media:e,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.options=Object.assign({},c,t),this.timer=new l;const i=e?void 0:this.getMediaElement();this.renderer=new h(this.options,i),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins(),Promise.resolve().then((()=>{this.emit(\"init\");const t=this.options.url||this.getSrc()||\"\";(t||this.options.peaks&&this.options.duration)&&this.load(t,this.options.peaks,this.options.duration)}))}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on(\"tick\",(()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit(\"timeupdate\",t),this.emit(\"audioprocess\",t)}})))}initPlayerEvents(){this.isPlaying()&&(this.emit(\"play\"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent(\"timeupdate\",(()=>{const t=this.updateProgress();this.emit(\"timeupdate\",t)})),this.onMediaEvent(\"play\",(()=>{this.emit(\"play\"),this.timer.start()})),this.onMediaEvent(\"pause\",(()=>{this.emit(\"pause\"),this.timer.stop()})),this.onMediaEvent(\"emptied\",(()=>{this.timer.stop()})),this.onMediaEvent(\"ended\",(()=>{this.emit(\"finish\")})),this.onMediaEvent(\"seeking\",(()=>{this.emit(\"seeking\",this.getCurrentTime())})))}initRendererEvents(){this.subscriptions.push(this.renderer.on(\"click\",((t,e)=>{this.options.interact&&(this.seekTo(t),this.emit(\"interaction\",t*this.getDuration()),this.emit(\"click\",t,e))})),this.renderer.on(\"dblclick\",((t,e)=>{this.emit(\"dblclick\",t,e)})),this.renderer.on(\"scroll\",((t,e)=>{const i=this.getDuration();this.emit(\"scroll\",t*i,e*i)})),this.renderer.on(\"render\",(()=>{this.emit(\"redraw\")})),this.renderer.on(\"rendered\",(()=>{this.emit(\"redrawcomplete\")})));{let t;this.subscriptions.push(this.renderer.on(\"drag\",(e=>{this.options.interact&&(this.renderer.renderProgress(e),clearTimeout(t),t=setTimeout((()=>{this.seekTo(e)}),this.isPlaying()?0:200),this.emit(\"interaction\",e*this.getDuration()),this.emit(\"drag\",e))})))}}initPlugins(){var t;(null===(t=this.options.plugins)||void 0===t?void 0:t.length)&&this.options.plugins.forEach((t=>{this.registerPlugin(t)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((t=>t())),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),null!=t.mediaControls&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once(\"destroy\",(()=>{this.plugins=this.plugins.filter((e=>e!==t))}))),t}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}getActivePlugins(){return this.plugins}loadAudio(e,n,s,r){return t(this,void 0,void 0,(function*(){if(this.emit(\"load\",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!s){const t=t=>this.emit(\"loading\",t);n=yield o.fetchBlob(e,t,this.options.fetchParams)}this.setSrc(e,n);const t=r||this.getDuration()||(yield new Promise((t=>{this.onceMediaEvent(\"loadedmetadata\",(()=>t(this.getDuration())))})));if(s)this.decodedData=i.createBuffer(s,t||0);else if(n){const t=yield n.arrayBuffer();this.decodedData=yield i.decode(t,this.options.sampleRate)}this.decodedData&&(this.emit(\"decode\",this.getDuration()),this.renderer.render(this.decodedData)),this.emit(\"ready\",this.getDuration())}))}load(e,i,n){return t(this,void 0,void 0,(function*(){yield this.loadAudio(e,void 0,i,n)}))}loadBlob(e,i,n){return t(this,void 0,void 0,(function*(){yield this.loadAudio(\"blob\",e,i,n)}))}zoom(t){if(!this.decodedData)throw new Error(\"No audio loaded\");this.renderer.zoom(t),this.emit(\"zoom\",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:e=8e3,precision:i=1e4}={}){if(!this.decodedData)throw new Error(\"The audio has not been decoded yet\");const n=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let t=0;t<n;t++){const n=this.decodedData.getChannelData(t),r=[],o=Math.round(n.length/e);for(let t=0;t<e;t++){const e=n.slice(t*o,(t+1)*o);let s=0;for(let t=0;t<e.length;t++){const i=e[t];Math.abs(i)>Math.abs(s)&&(s=i)}r.push(Math.round(s*i)/i)}s.push(r)}return s}getDuration(){let t=super.getDuration()||0;return 0!==t&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t)}seekTo(t){const e=this.getDuration()*t;this.setTime(e)}playPause(){return t(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load(\"\",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(e=\"image/png\",i=1,n=\"dataURL\"){return t(this,void 0,void 0,(function*(){return this.renderer.exportImage(e,i,n)}))}destroy(){this.emit(\"destroy\"),this.plugins.forEach((t=>t.destroy())),this.subscriptions.forEach((t=>t())),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}u.BasePlugin=class extends e{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit(\"destroy\"),this.subscriptions.forEach((t=>t()))}},u.dom=r;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2F2ZXN1cmZlci5qcy9kaXN0L3dhdmVzdXJmZXIuZXNtLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwQ0FBMEMsY0FBYyxJQUFJLGFBQWEsU0FBUyxNQUFNLGNBQWMsSUFBSSxjQUFjLFNBQVMsTUFBTSxjQUFjLE1BQU0saUVBQWlFLEtBQUssY0FBYywrQkFBK0IsR0FBRyxRQUFRLGNBQWMsa0JBQWtCLFVBQVUsa0dBQWtHLGFBQWEsMkJBQTJCLHNCQUFzQix1QkFBdUIsUUFBUSxNQUFNLHNEQUFzRCxVQUFVLG9CQUFvQixRQUFRLEVBQUUsUUFBUSxrQkFBa0IsYUFBYSw0REFBNEQsU0FBUyxxQkFBcUIseUNBQXlDLDBCQUEwQixhQUFhLEVBQUUscURBQXFELEdBQUcsNEJBQTRCLGlEQUFpRCxhQUFhLDJCQUEyQixpQkFBaUIsUUFBUSxZQUFZLElBQUksS0FBSyx1QkFBdUIsV0FBVyw2QkFBNkIsSUFBSSxhQUFhLEtBQUssa09BQWtPLGdCQUFnQiw4RUFBOEUsMktBQTJLLDBHQUEwRyxTQUFTLGtCQUFrQixpQkFBaUIsRUFBRSxtQ0FBbUMscUJBQXFCLHlDQUF5QyxFQUFFLFNBQVMsMEJBQTBCLHlDQUF5Qyx5QkFBeUIsb0RBQW9ELEVBQUUsSUFBSSxVQUFVLEdBQUcsYUFBYSxJQUFJLHFCQUFxQixrQ0FBa0MsOEJBQThCLHdFQUF3RSxRQUFRLDZDQUE2QyxnQ0FBZ0MsNEJBQTRCLEtBQUssMkNBQTJDLE1BQU0sSUFBSSxpQkFBaUIsU0FBUyxPQUFPLCtCQUErQixHQUFHLElBQUksR0FBRyx1QkFBdUIsS0FBSyxrQkFBa0IsZUFBZSx5UUFBeVEsK0RBQStELEdBQUcsb0JBQW9CLGtGQUFrRixvQkFBb0IsOEJBQThCLFFBQVEsRUFBRSxTQUFTLGlEQUFpRCxZQUFZLHNCQUFzQiw4Q0FBOEMsZUFBZSxxQ0FB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LHdJQUF3SSxHQUFHLFlBQVkseUNBQXlDLG1DQUFtQyxHQUFHLGdCQUFnQix5Q0FBeUMsbUNBQW1DLEdBQUcsUUFBUSx3REFBd0QsMENBQTBDLGlCQUFpQix3QkFBd0IsYUFBYSw2Q0FBNkMsR0FBRyxFQUFFLDJFQUEyRSwyREFBMkQsWUFBWSxJQUFJLEtBQUsseUVBQXlFLFlBQVksSUFBSSxLQUFLLDZCQUE2QixRQUFRLFlBQVksV0FBVyxLQUFLLGFBQWEsK0JBQStCLDBCQUEwQixVQUFVLFNBQVMsY0FBYyw2QkFBNkIsMEVBQTBFLHFCQUFxQix3QkFBd0IsV0FBVyx3Q0FBd0MsVUFBVSw2QkFBNkIsZ0JBQWdCLFlBQVkseUNBQXlDLGlEQUFpRCxHQUFHLE9BQU8sNkJBQTZCLFFBQVEsc0NBQXNDLFFBQVEseUJBQXlCLG1CQUFtQixnRkFBZ0YsMkNBQTJDLHlDQUF5Qyx3Q0FBd0MsR0FBRyxVQUFVLDhMQUE4TCw2QkFBNkIsZUFBZSw2Q0FBNkMsVUFBVSxTQUFTLGdDQUFnQyxVQUFVLDJEQUEyRCxTQUE4QiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvd2F2ZXN1cmZlci5qcy9kaXN0L3dhdmVzdXJmZXIuZXNtLmpzPzQ1ZGUiXSwic291cmNlc0NvbnRlbnQiOlsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cblxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5mdW5jdGlvbiB0KHQsZSxpLG4pe3JldHVybiBuZXcoaXx8KGk9UHJvbWlzZSkpKChmdW5jdGlvbihzLHIpe2Z1bmN0aW9uIG8odCl7dHJ5e2gobi5uZXh0KHQpKX1jYXRjaCh0KXtyKHQpfX1mdW5jdGlvbiBhKHQpe3RyeXtoKG4udGhyb3codCkpfWNhdGNoKHQpe3IodCl9fWZ1bmN0aW9uIGgodCl7dmFyIGU7dC5kb25lP3ModC52YWx1ZSk6KGU9dC52YWx1ZSxlIGluc3RhbmNlb2YgaT9lOm5ldyBpKChmdW5jdGlvbih0KXt0KGUpfSkpKS50aGVuKG8sYSl9aCgobj1uLmFwcGx5KHQsZXx8W10pKS5uZXh0KCkpfSkpfWNsYXNzIGV7Y29uc3RydWN0b3IoKXt0aGlzLmxpc3RlbmVycz17fX1vbih0LGUsaSl7aWYodGhpcy5saXN0ZW5lcnNbdF18fCh0aGlzLmxpc3RlbmVyc1t0XT1uZXcgU2V0KSx0aGlzLmxpc3RlbmVyc1t0XS5hZGQoZSksbnVsbD09aT92b2lkIDA6aS5vbmNlKXtjb25zdCBpPSgpPT57dGhpcy51bih0LGkpLHRoaXMudW4odCxlKX07cmV0dXJuIHRoaXMub24odCxpKSxpfXJldHVybigpPT50aGlzLnVuKHQsZSl9dW4odCxlKXt2YXIgaTtudWxsPT09KGk9dGhpcy5saXN0ZW5lcnNbdF0pfHx2b2lkIDA9PT1pfHxpLmRlbGV0ZShlKX1vbmNlKHQsZSl7cmV0dXJuIHRoaXMub24odCxlLHtvbmNlOiEwfSl9dW5BbGwoKXt0aGlzLmxpc3RlbmVycz17fX1lbWl0KHQsLi4uZSl7dGhpcy5saXN0ZW5lcnNbdF0mJnRoaXMubGlzdGVuZXJzW3RdLmZvckVhY2goKHQ9PnQoLi4uZSkpKX19Y29uc3QgaT17ZGVjb2RlOmZ1bmN0aW9uKGUsaSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PW5ldyBBdWRpb0NvbnRleHQoe3NhbXBsZVJhdGU6aX0pO3JldHVybiB0LmRlY29kZUF1ZGlvRGF0YShlKS5maW5hbGx5KCgoKT0+dC5jbG9zZSgpKSl9KSl9LGNyZWF0ZUJ1ZmZlcjpmdW5jdGlvbih0LGUpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0WzBdJiYodD1bdF0pLGZ1bmN0aW9uKHQpe2NvbnN0IGU9dFswXTtpZihlLnNvbWUoKHQ9PnQ+MXx8dDwtMSkpKXtjb25zdCBpPWUubGVuZ3RoO2xldCBuPTA7Zm9yKGxldCB0PTA7dDxpO3QrKyl7Y29uc3QgaT1NYXRoLmFicyhlW3RdKTtpPm4mJihuPWkpfWZvcihjb25zdCBlIG9mIHQpZm9yKGxldCB0PTA7dDxpO3QrKyllW3RdLz1ufX0odCkse2R1cmF0aW9uOmUsbGVuZ3RoOnRbMF0ubGVuZ3RoLHNhbXBsZVJhdGU6dFswXS5sZW5ndGgvZSxudW1iZXJPZkNoYW5uZWxzOnQubGVuZ3RoLGdldENoYW5uZWxEYXRhOmU9Pm51bGw9PXQ/dm9pZCAwOnRbZV0sY29weUZyb21DaGFubmVsOkF1ZGlvQnVmZmVyLnByb3RvdHlwZS5jb3B5RnJvbUNoYW5uZWwsY29weVRvQ2hhbm5lbDpBdWRpb0J1ZmZlci5wcm90b3R5cGUuY29weVRvQ2hhbm5lbH19fTtmdW5jdGlvbiBuKHQsZSl7Y29uc3QgaT1lLnhtbG5zP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhlLnhtbG5zLHQpOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodCk7Zm9yKGNvbnN0W3Qsc11vZiBPYmplY3QuZW50cmllcyhlKSlpZihcImNoaWxkcmVuXCI9PT10KWZvcihjb25zdFt0LHNdb2YgT2JqZWN0LmVudHJpZXMoZSkpXCJzdHJpbmdcIj09dHlwZW9mIHM/aS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzKSk6aS5hcHBlbmRDaGlsZChuKHQscykpO2Vsc2VcInN0eWxlXCI9PT10P09iamVjdC5hc3NpZ24oaS5zdHlsZSxzKTpcInRleHRDb250ZW50XCI9PT10P2kudGV4dENvbnRlbnQ9czppLnNldEF0dHJpYnV0ZSh0LHMudG9TdHJpbmcoKSk7cmV0dXJuIGl9ZnVuY3Rpb24gcyh0LGUsaSl7Y29uc3Qgcz1uKHQsZXx8e30pO3JldHVybiBudWxsPT1pfHxpLmFwcGVuZENoaWxkKHMpLHN9dmFyIHI9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsY3JlYXRlRWxlbWVudDpzLGRlZmF1bHQ6c30pO2NvbnN0IG89e2ZldGNoQmxvYjpmdW5jdGlvbihlLGksbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBzPXlpZWxkIGZldGNoKGUsbik7aWYocy5zdGF0dXM+PTQwMCl0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCAke2V9OiAke3Muc3RhdHVzfSAoJHtzLnN0YXR1c1RleHR9KWApO3JldHVybiBmdW5jdGlvbihlLGkpe3QodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZighZS5ib2R5fHwhZS5oZWFkZXJzKXJldHVybjtjb25zdCBuPWUuYm9keS5nZXRSZWFkZXIoKSxzPU51bWJlcihlLmhlYWRlcnMuZ2V0KFwiQ29udGVudC1MZW5ndGhcIikpfHwwO2xldCByPTA7Y29uc3Qgbz1lPT50KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cis9KG51bGw9PWU/dm9pZCAwOmUubGVuZ3RoKXx8MDtjb25zdCB0PU1hdGgucm91bmQoci9zKjEwMCk7aSh0KX0pKSxhPSgpPT50KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7bGV0IHQ7dHJ5e3Q9eWllbGQgbi5yZWFkKCl9Y2F0Y2godCl7cmV0dXJufXQuZG9uZXx8KG8odC52YWx1ZSkseWllbGQgYSgpKX0pKTthKCl9KSl9KHMuY2xvbmUoKSxpKSxzLmJsb2IoKX0pKX19O2NsYXNzIGEgZXh0ZW5kcyBle2NvbnN0cnVjdG9yKHQpe3N1cGVyKCksdGhpcy5pc0V4dGVybmFsTWVkaWE9ITEsdC5tZWRpYT8odGhpcy5tZWRpYT10Lm1lZGlhLHRoaXMuaXNFeHRlcm5hbE1lZGlhPSEwKTp0aGlzLm1lZGlhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiKSx0Lm1lZGlhQ29udHJvbHMmJih0aGlzLm1lZGlhLmNvbnRyb2xzPSEwKSx0LmF1dG9wbGF5JiYodGhpcy5tZWRpYS5hdXRvcGxheT0hMCksbnVsbCE9dC5wbGF5YmFja1JhdGUmJnRoaXMub25jZU1lZGlhRXZlbnQoXCJjYW5wbGF5XCIsKCgpPT57bnVsbCE9dC5wbGF5YmFja1JhdGUmJih0aGlzLm1lZGlhLnBsYXliYWNrUmF0ZT10LnBsYXliYWNrUmF0ZSl9KSl9b25NZWRpYUV2ZW50KHQsZSxpKXtyZXR1cm4gdGhpcy5tZWRpYS5hZGRFdmVudExpc3RlbmVyKHQsZSxpKSwoKT0+dGhpcy5tZWRpYS5yZW1vdmVFdmVudExpc3RlbmVyKHQsZSl9b25jZU1lZGlhRXZlbnQodCxlKXtyZXR1cm4gdGhpcy5vbk1lZGlhRXZlbnQodCxlLHtvbmNlOiEwfSl9Z2V0U3JjKCl7cmV0dXJuIHRoaXMubWVkaWEuY3VycmVudFNyY3x8dGhpcy5tZWRpYS5zcmN8fFwiXCJ9cmV2b2tlU3JjKCl7Y29uc3QgdD10aGlzLmdldFNyYygpO3Quc3RhcnRzV2l0aChcImJsb2I6XCIpJiZVUkwucmV2b2tlT2JqZWN0VVJMKHQpfWNhblBsYXlUeXBlKHQpe3JldHVyblwiXCIhPT10aGlzLm1lZGlhLmNhblBsYXlUeXBlKHQpfXNldFNyYyh0LGUpe2lmKHRoaXMuZ2V0U3JjKCk9PT10KXJldHVybjt0aGlzLnJldm9rZVNyYygpO2NvbnN0IGk9ZSBpbnN0YW5jZW9mIEJsb2ImJnRoaXMuY2FuUGxheVR5cGUoZS50eXBlKT9VUkwuY3JlYXRlT2JqZWN0VVJMKGUpOnQ7dGhpcy5tZWRpYS5zcmM9aX1kZXN0cm95KCl7dGhpcy5tZWRpYS5wYXVzZSgpLHRoaXMuaXNFeHRlcm5hbE1lZGlhfHwodGhpcy5tZWRpYS5yZW1vdmUoKSx0aGlzLnJldm9rZVNyYygpLHRoaXMubWVkaWEuc3JjPVwiXCIsdGhpcy5tZWRpYS5sb2FkKCkpfXNldE1lZGlhRWxlbWVudCh0KXt0aGlzLm1lZGlhPXR9cGxheSgpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYodGhpcy5tZWRpYS5zcmMpcmV0dXJuIHRoaXMubWVkaWEucGxheSgpfSkpfXBhdXNlKCl7dGhpcy5tZWRpYS5wYXVzZSgpfWlzUGxheWluZygpe3JldHVybiF0aGlzLm1lZGlhLnBhdXNlZCYmIXRoaXMubWVkaWEuZW5kZWR9c2V0VGltZSh0KXt0aGlzLm1lZGlhLmN1cnJlbnRUaW1lPXR9Z2V0RHVyYXRpb24oKXtyZXR1cm4gdGhpcy5tZWRpYS5kdXJhdGlvbn1nZXRDdXJyZW50VGltZSgpe3JldHVybiB0aGlzLm1lZGlhLmN1cnJlbnRUaW1lfWdldFZvbHVtZSgpe3JldHVybiB0aGlzLm1lZGlhLnZvbHVtZX1zZXRWb2x1bWUodCl7dGhpcy5tZWRpYS52b2x1bWU9dH1nZXRNdXRlZCgpe3JldHVybiB0aGlzLm1lZGlhLm11dGVkfXNldE11dGVkKHQpe3RoaXMubWVkaWEubXV0ZWQ9dH1nZXRQbGF5YmFja1JhdGUoKXtyZXR1cm4gdGhpcy5tZWRpYS5wbGF5YmFja1JhdGV9aXNTZWVraW5nKCl7cmV0dXJuIHRoaXMubWVkaWEuc2Vla2luZ31zZXRQbGF5YmFja1JhdGUodCxlKXtudWxsIT1lJiYodGhpcy5tZWRpYS5wcmVzZXJ2ZXNQaXRjaD1lKSx0aGlzLm1lZGlhLnBsYXliYWNrUmF0ZT10fWdldE1lZGlhRWxlbWVudCgpe3JldHVybiB0aGlzLm1lZGlhfXNldFNpbmtJZCh0KXtyZXR1cm4gdGhpcy5tZWRpYS5zZXRTaW5rSWQodCl9fWNsYXNzIGggZXh0ZW5kcyBle2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIoKSx0aGlzLnRpbWVvdXRzPVtdLHRoaXMuaXNTY3JvbGxhYmxlPSExLHRoaXMuYXVkaW9EYXRhPW51bGwsdGhpcy5yZXNpemVPYnNlcnZlcj1udWxsLHRoaXMubGFzdENvbnRhaW5lcldpZHRoPTAsdGhpcy5pc0RyYWdnaW5nPSExLHRoaXMub3B0aW9ucz10O2NvbnN0IGk9dGhpcy5wYXJlbnRGcm9tT3B0aW9uc0NvbnRhaW5lcih0LmNvbnRhaW5lcik7dGhpcy5wYXJlbnQ9aTtjb25zdFtuLHNdPXRoaXMuaW5pdEh0bWwoKTtpLmFwcGVuZENoaWxkKG4pLHRoaXMuY29udGFpbmVyPW4sdGhpcy5zY3JvbGxDb250YWluZXI9cy5xdWVyeVNlbGVjdG9yKFwiLnNjcm9sbFwiKSx0aGlzLndyYXBwZXI9cy5xdWVyeVNlbGVjdG9yKFwiLndyYXBwZXJcIiksdGhpcy5jYW52YXNXcmFwcGVyPXMucXVlcnlTZWxlY3RvcihcIi5jYW52YXNlc1wiKSx0aGlzLnByb2dyZXNzV3JhcHBlcj1zLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZ3Jlc3NcIiksdGhpcy5jdXJzb3I9cy5xdWVyeVNlbGVjdG9yKFwiLmN1cnNvclwiKSxlJiZzLmFwcGVuZENoaWxkKGUpLHRoaXMuaW5pdEV2ZW50cygpfXBhcmVudEZyb21PcHRpb25zQ29udGFpbmVyKHQpe2xldCBlO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0P2U9ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0KTp0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQmJihlPXQpLCFlKXRocm93IG5ldyBFcnJvcihcIkNvbnRhaW5lciBub3QgZm91bmRcIik7cmV0dXJuIGV9aW5pdEV2ZW50cygpe2NvbnN0IHQ9dD0+e2NvbnN0IGU9dGhpcy53cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGk9dC5jbGllbnRYLWUubGVmdCxuPXQuY2xpZW50WC1lLmxlZnQ7cmV0dXJuW2kvZS53aWR0aCxuL2UuaGVpZ2h0XX07dGhpcy53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLChlPT57Y29uc3RbaSxuXT10KGUpO3RoaXMuZW1pdChcImNsaWNrXCIsaSxuKX0pKSx0aGlzLndyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImRibGNsaWNrXCIsKGU9Pntjb25zdFtpLG5dPXQoZSk7dGhpcy5lbWl0KFwiZGJsY2xpY2tcIixpLG4pfSkpLHRoaXMub3B0aW9ucy5kcmFnVG9TZWVrJiZ0aGlzLmluaXREcmFnKCksdGhpcy5zY3JvbGxDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCgoKT0+e2NvbnN0e3Njcm9sbExlZnQ6dCxzY3JvbGxXaWR0aDplLGNsaWVudFdpZHRoOml9PXRoaXMuc2Nyb2xsQ29udGFpbmVyLG49dC9lLHM9KHQraSkvZTt0aGlzLmVtaXQoXCJzY3JvbGxcIixuLHMpfSkpO2NvbnN0IGU9dGhpcy5jcmVhdGVEZWxheSgxMDApO3RoaXMucmVzaXplT2JzZXJ2ZXI9bmV3IFJlc2l6ZU9ic2VydmVyKCgoKT0+e2UoKS50aGVuKCgoKT0+dGhpcy5vbkNvbnRhaW5lclJlc2l6ZSgpKSkuY2F0Y2goKCgpPT57fSkpfSkpLHRoaXMucmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnNjcm9sbENvbnRhaW5lcil9b25Db250YWluZXJSZXNpemUoKXtjb25zdCB0PXRoaXMucGFyZW50LmNsaWVudFdpZHRoO3Q9PT10aGlzLmxhc3RDb250YWluZXJXaWR0aCYmXCJhdXRvXCIhPT10aGlzLm9wdGlvbnMuaGVpZ2h0fHwodGhpcy5sYXN0Q29udGFpbmVyV2lkdGg9dCx0aGlzLnJlUmVuZGVyKCkpfWluaXREcmFnKCl7IWZ1bmN0aW9uKHQsZSxpLG4scz0zLHI9MCl7aWYoIXQpcmV0dXJuKCk9Pnt9O2xldCBvPSgpPT57fTtjb25zdCBhPWE9PntpZihhLmJ1dHRvbiE9PXIpcmV0dXJuO2EucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpO2xldCBoPWEuY2xpZW50WCxsPWEuY2xpZW50WSxkPSExO2NvbnN0IGM9bj0+e24ucHJldmVudERlZmF1bHQoKSxuLnN0b3BQcm9wYWdhdGlvbigpO2NvbnN0IHI9bi5jbGllbnRYLG89bi5jbGllbnRZLGE9ci1oLGM9by1sO2lmKGR8fE1hdGguYWJzKGEpPnN8fE1hdGguYWJzKGMpPnMpe2NvbnN0IG49dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSx7bGVmdDpzLHRvcDp1fT1uO2R8fChudWxsPT1pfHxpKGgtcyxsLXUpLGQ9ITApLGUoYSxjLHItcyxvLXUpLGg9cixsPW99fSx1PSgpPT57ZCYmKG51bGw9PW58fG4oKSksbygpfSxwPXQ9Pnt0LnJlbGF0ZWRUYXJnZXQmJnQucmVsYXRlZFRhcmdldCE9PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudHx8dSgpfSxtPXQ9PntkJiYodC5zdG9wUHJvcGFnYXRpb24oKSx0LnByZXZlbnREZWZhdWx0KCkpfSxmPXQ9PntkJiZ0LnByZXZlbnREZWZhdWx0KCl9O2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLGMpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIix1KSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm91dFwiLHApLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIscCksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLGYse3Bhc3NpdmU6ITF9KSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixtLHtjYXB0dXJlOiEwfSksbz0oKT0+e2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLGMpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIix1KSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm91dFwiLHApLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIscCksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLGYpLHNldFRpbWVvdXQoKCgpPT57ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsbSx7Y2FwdHVyZTohMH0pfSksMTApfX07dC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIixhKX0odGhpcy53cmFwcGVyLCgodCxlLGkpPT57dGhpcy5lbWl0KFwiZHJhZ1wiLE1hdGgubWF4KDAsTWF0aC5taW4oMSxpL3RoaXMud3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCkpKX0pLCgoKT0+dGhpcy5pc0RyYWdnaW5nPSEwKSwoKCk9PnRoaXMuaXNEcmFnZ2luZz0hMSkpfWdldEhlaWdodCh0KXtyZXR1cm4gbnVsbD09dD8xMjg6aXNOYU4oTnVtYmVyKHQpKT9cImF1dG9cIj09PXQmJnRoaXMucGFyZW50LmNsaWVudEhlaWdodHx8MTI4Ok51bWJlcih0KX1pbml0SHRtbCgpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxlPXQuYXR0YWNoU2hhZG93KHttb2RlOlwib3BlblwifSk7cmV0dXJuIGUuaW5uZXJIVE1MPWBcXG4gICAgICA8c3R5bGU+XFxuICAgICAgICA6aG9zdCB7XFxuICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xcbiAgICAgICAgICBtaW4td2lkdGg6IDFweDtcXG4gICAgICAgIH1cXG4gICAgICAgIDpob3N0IGF1ZGlvIHtcXG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XFxuICAgICAgICAgIHdpZHRoOiAxMDAlO1xcbiAgICAgICAgfVxcbiAgICAgICAgOmhvc3QgLnNjcm9sbCB7XFxuICAgICAgICAgIG92ZXJmbG93LXg6IGF1dG87XFxuICAgICAgICAgIG92ZXJmbG93LXk6IGhpZGRlbjtcXG4gICAgICAgICAgd2lkdGg6IDEwMCU7XFxuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgICAgIH1cXG4gICAgICAgIDpob3N0IC5ub1Njcm9sbGJhciB7XFxuICAgICAgICAgIHNjcm9sbGJhci1jb2xvcjogdHJhbnNwYXJlbnQ7XFxuICAgICAgICAgIHNjcm9sbGJhci13aWR0aDogbm9uZTtcXG4gICAgICAgIH1cXG4gICAgICAgIDpob3N0IC5ub1Njcm9sbGJhcjo6LXdlYmtpdC1zY3JvbGxiYXIge1xcbiAgICAgICAgICBkaXNwbGF5OiBub25lO1xcbiAgICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XFxuICAgICAgICB9XFxuICAgICAgICA6aG9zdCAud3JhcHBlciB7XFxuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgICAgICAgb3ZlcmZsb3c6IHZpc2libGU7XFxuICAgICAgICAgIHotaW5kZXg6IDI7XFxuICAgICAgICB9XFxuICAgICAgICA6aG9zdCAuY2FudmFzZXMge1xcbiAgICAgICAgICBtaW4taGVpZ2h0OiAke3RoaXMuZ2V0SGVpZ2h0KHRoaXMub3B0aW9ucy5oZWlnaHQpfXB4O1xcbiAgICAgICAgfVxcbiAgICAgICAgOmhvc3QgLmNhbnZhc2VzID4gZGl2IHtcXG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgICAgICAgfVxcbiAgICAgICAgOmhvc3QgY2FudmFzIHtcXG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XFxuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgICAgICAgdG9wOiAwO1xcbiAgICAgICAgICBpbWFnZS1yZW5kZXJpbmc6IHBpeGVsYXRlZDtcXG4gICAgICAgIH1cXG4gICAgICAgIDpob3N0IC5wcm9ncmVzcyB7XFxuICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgICAgICAgIHotaW5kZXg6IDI7XFxuICAgICAgICAgIHRvcDogMDtcXG4gICAgICAgICAgbGVmdDogMDtcXG4gICAgICAgICAgd2lkdGg6IDA7XFxuICAgICAgICAgIGhlaWdodDogMTAwJTtcXG4gICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcXG4gICAgICAgIH1cXG4gICAgICAgIDpob3N0IC5wcm9ncmVzcyA+IGRpdiB7XFxuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgICAgIH1cXG4gICAgICAgIDpob3N0IC5jdXJzb3Ige1xcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICAgICAgICB6LWluZGV4OiA1O1xcbiAgICAgICAgICB0b3A6IDA7XFxuICAgICAgICAgIGxlZnQ6IDA7XFxuICAgICAgICAgIGhlaWdodDogMTAwJTtcXG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogMnB4O1xcbiAgICAgICAgfVxcbiAgICAgIDwvc3R5bGU+XFxuXFxuICAgICAgPGRpdiBjbGFzcz1cInNjcm9sbFwiIHBhcnQ9XCJzY3JvbGxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ3cmFwcGVyXCIgcGFydD1cIndyYXBwZXJcIj5cXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNhbnZhc2VzXCI+PC9kaXY+XFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzc1wiIHBhcnQ9XCJwcm9ncmVzc1wiPjwvZGl2PlxcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3Vyc29yXCIgcGFydD1cImN1cnNvclwiPjwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgPC9kaXY+XFxuICAgIGAsW3QsZV19c2V0T3B0aW9ucyh0KXtpZih0aGlzLm9wdGlvbnMuY29udGFpbmVyIT09dC5jb250YWluZXIpe2NvbnN0IGU9dGhpcy5wYXJlbnRGcm9tT3B0aW9uc0NvbnRhaW5lcih0LmNvbnRhaW5lcik7ZS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lciksdGhpcy5wYXJlbnQ9ZX10LmRyYWdUb1NlZWsmJiF0aGlzLm9wdGlvbnMuZHJhZ1RvU2VlayYmdGhpcy5pbml0RHJhZygpLHRoaXMub3B0aW9ucz10LHRoaXMucmVSZW5kZXIoKX1nZXRXcmFwcGVyKCl7cmV0dXJuIHRoaXMud3JhcHBlcn1nZXRTY3JvbGwoKXtyZXR1cm4gdGhpcy5zY3JvbGxDb250YWluZXIuc2Nyb2xsTGVmdH1kZXN0cm95KCl7dmFyIHQ7dGhpcy5jb250YWluZXIucmVtb3ZlKCksbnVsbD09PSh0PXRoaXMucmVzaXplT2JzZXJ2ZXIpfHx2b2lkIDA9PT10fHx0LmRpc2Nvbm5lY3QoKX1jcmVhdGVEZWxheSh0PTEwKXtsZXQgZSxpO2NvbnN0IG49KCk9PntlJiZjbGVhclRpbWVvdXQoZSksaSYmaSgpfTtyZXR1cm4gdGhpcy50aW1lb3V0cy5wdXNoKG4pLCgpPT5uZXcgUHJvbWlzZSgoKHMscik9PntuKCksaT1yLGU9c2V0VGltZW91dCgoKCk9PntlPXZvaWQgMCxpPXZvaWQgMCxzKCl9KSx0KX0pKX1jb252ZXJ0Q29sb3JWYWx1ZXModCl7aWYoIUFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHR8fFwiXCI7aWYodC5sZW5ndGg8MilyZXR1cm4gdFswXXx8XCJcIjtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksaT1lLmdldENvbnRleHQoXCIyZFwiKSxuPWUuaGVpZ2h0Kih3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb3x8MSkscz1pLmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsMCwwLG4pLHI9MS8odC5sZW5ndGgtMSk7cmV0dXJuIHQuZm9yRWFjaCgoKHQsZSk9Pntjb25zdCBpPWUqcjtzLmFkZENvbG9yU3RvcChpLHQpfSkpLHN9cmVuZGVyQmFyV2F2ZWZvcm0odCxlLGksbil7Y29uc3Qgcz10WzBdLHI9dFsxXXx8dFswXSxvPXMubGVuZ3RoLHt3aWR0aDphLGhlaWdodDpofT1pLmNhbnZhcyxsPWgvMixkPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfHwxLGM9ZS5iYXJXaWR0aD9lLmJhcldpZHRoKmQ6MSx1PWUuYmFyR2FwP2UuYmFyR2FwKmQ6ZS5iYXJXaWR0aD9jLzI6MCxwPWUuYmFyUmFkaXVzfHwwLG09YS8oYyt1KS9vLGY9cCYmXCJyb3VuZFJlY3RcImluIGk/XCJyb3VuZFJlY3RcIjpcInJlY3RcIjtpLmJlZ2luUGF0aCgpO2xldCBnPTAsdj0wLGI9MDtmb3IobGV0IHQ9MDt0PD1vO3QrKyl7Y29uc3Qgbz1NYXRoLnJvdW5kKHQqbSk7aWYobz5nKXtjb25zdCB0PU1hdGgucm91bmQodipsKm4pLHM9dCtNYXRoLnJvdW5kKGIqbCpuKXx8MTtsZXQgcj1sLXQ7XCJ0b3BcIj09PWUuYmFyQWxpZ24/cj0wOlwiYm90dG9tXCI9PT1lLmJhckFsaWduJiYocj1oLXMpLGlbZl0oZyooYyt1KSxyLGMscyxwKSxnPW8sdj0wLGI9MH1jb25zdCBhPU1hdGguYWJzKHNbdF18fDApLGQ9TWF0aC5hYnMoclt0XXx8MCk7YT52JiYodj1hKSxkPmImJihiPWQpfWkuZmlsbCgpLGkuY2xvc2VQYXRoKCl9cmVuZGVyTGluZVdhdmVmb3JtKHQsZSxpLG4pe2NvbnN0IHM9ZT0+e2NvbnN0IHM9dFtlXXx8dFswXSxyPXMubGVuZ3RoLHtoZWlnaHQ6b309aS5jYW52YXMsYT1vLzIsaD1pLmNhbnZhcy53aWR0aC9yO2kubW92ZVRvKDAsYSk7bGV0IGw9MCxkPTA7Zm9yKGxldCB0PTA7dDw9cjt0Kyspe2NvbnN0IHI9TWF0aC5yb3VuZCh0KmgpO2lmKHI+bCl7Y29uc3QgdD1hKyhNYXRoLnJvdW5kKGQqYSpuKXx8MSkqKDA9PT1lPy0xOjEpO2kubGluZVRvKGwsdCksbD1yLGQ9MH1jb25zdCBvPU1hdGguYWJzKHNbdF18fDApO28+ZCYmKGQ9byl9aS5saW5lVG8obCxhKX07aS5iZWdpblBhdGgoKSxzKDApLHMoMSksaS5maWxsKCksaS5jbG9zZVBhdGgoKX1yZW5kZXJXYXZlZm9ybSh0LGUsaSl7aWYoaS5maWxsU3R5bGU9dGhpcy5jb252ZXJ0Q29sb3JWYWx1ZXMoZS53YXZlQ29sb3IpLGUucmVuZGVyRnVuY3Rpb24pcmV0dXJuIHZvaWQgZS5yZW5kZXJGdW5jdGlvbih0LGkpO2xldCBuPWUuYmFySGVpZ2h0fHwxO2lmKGUubm9ybWFsaXplKXtjb25zdCBlPUFycmF5LmZyb20odFswXSkucmVkdWNlKCgodCxlKT0+TWF0aC5tYXgodCxNYXRoLmFicyhlKSkpLDApO249ZT8xL2U6MX1lLmJhcldpZHRofHxlLmJhckdhcHx8ZS5iYXJBbGlnbj90aGlzLnJlbmRlckJhcldhdmVmb3JtKHQsZSxpLG4pOnRoaXMucmVuZGVyTGluZVdhdmVmb3JtKHQsZSxpLG4pfXJlbmRlclNpbmdsZUNhbnZhcyh0LGUsaSxuLHMscixvLGEpe2NvbnN0IGg9d2luZG93LmRldmljZVBpeGVsUmF0aW98fDEsbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLGQ9dFswXS5sZW5ndGg7bC53aWR0aD1NYXRoLnJvdW5kKGkqKHItcykvZCksbC5oZWlnaHQ9bipoLGwuc3R5bGUud2lkdGg9YCR7TWF0aC5mbG9vcihsLndpZHRoL2gpfXB4YCxsLnN0eWxlLmhlaWdodD1gJHtufXB4YCxsLnN0eWxlLmxlZnQ9YCR7TWF0aC5mbG9vcihzKmkvaC9kKX1weGAsby5hcHBlbmRDaGlsZChsKTtjb25zdCBjPWwuZ2V0Q29udGV4dChcIjJkXCIpO2lmKHRoaXMucmVuZGVyV2F2ZWZvcm0odC5tYXAoKHQ9PnQuc2xpY2UocyxyKSkpLGUsYyksbC53aWR0aD4wJiZsLmhlaWdodD4wKXtjb25zdCB0PWwuY2xvbmVOb2RlKCksaT10LmdldENvbnRleHQoXCIyZFwiKTtpLmRyYXdJbWFnZShsLDAsMCksaS5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249XCJzb3VyY2UtaW5cIixpLmZpbGxTdHlsZT10aGlzLmNvbnZlcnRDb2xvclZhbHVlcyhlLnByb2dyZXNzQ29sb3IpLGkuZmlsbFJlY3QoMCwwLGwud2lkdGgsbC5oZWlnaHQpLGEuYXBwZW5kQ2hpbGQodCl9fXJlbmRlckNoYW5uZWwoZSxpLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3Qgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHI9dGhpcy5nZXRIZWlnaHQoaS5oZWlnaHQpO3Muc3R5bGUuaGVpZ2h0PWAke3J9cHhgLHRoaXMuY2FudmFzV3JhcHBlci5zdHlsZS5taW5IZWlnaHQ9YCR7cn1weGAsdGhpcy5jYW52YXNXcmFwcGVyLmFwcGVuZENoaWxkKHMpO2NvbnN0IG89cy5jbG9uZU5vZGUoKTt0aGlzLnByb2dyZXNzV3JhcHBlci5hcHBlbmRDaGlsZChvKTtjb25zdCBhPWVbMF0ubGVuZ3RoLGw9KHQsaCk9Pnt0aGlzLnJlbmRlclNpbmdsZUNhbnZhcyhlLGksbixyLE1hdGgubWF4KDAsdCksTWF0aC5taW4oaCxhKSxzLG8pfTtpZighdGhpcy5pc1Njcm9sbGFibGUpcmV0dXJuIHZvaWQgbCgwLGEpO2NvbnN0e3Njcm9sbExlZnQ6ZCxzY3JvbGxXaWR0aDpjLGNsaWVudFdpZHRoOnV9PXRoaXMuc2Nyb2xsQ29udGFpbmVyLHA9YS9jO2xldCBtPU1hdGgubWluKGguTUFYX0NBTlZBU19XSURUSCx1KTtpZihpLmJhcldpZHRofHxpLmJhckdhcCl7Y29uc3QgdD1pLmJhcldpZHRofHwuNSxlPXQrKGkuYmFyR2FwfHx0LzIpO20lZSE9MCYmKG09TWF0aC5mbG9vcihtL2UpKmUpfWNvbnN0IGY9TWF0aC5mbG9vcihNYXRoLmFicyhkKSpwKSxnPU1hdGguZmxvb3IoZittKnApLHY9Zy1mO3Y8PTB8fChsKGYsZykseWllbGQgUHJvbWlzZS5hbGwoWygoKT0+dCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKDA9PT1mKXJldHVybjtjb25zdCB0PXRoaXMuY3JlYXRlRGVsYXkoKTtmb3IobGV0IGU9ZjtlPj0wO2UtPXYpeWllbGQgdCgpLGwoTWF0aC5tYXgoMCxlLXYpLGUpfSkpKSgpLCgoKT0+dCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKGc9PT1hKXJldHVybjtjb25zdCB0PXRoaXMuY3JlYXRlRGVsYXkoKTtmb3IobGV0IGU9ZztlPGE7ZSs9dil5aWVsZCB0KCksbChlLE1hdGgubWluKGEsZSt2KSl9KSkpKCldKSl9KSl9cmVuZGVyKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dGhpcy50aW1lb3V0cy5mb3JFYWNoKCh0PT50KCkpKSx0aGlzLnRpbWVvdXRzPVtdLHRoaXMuY2FudmFzV3JhcHBlci5pbm5lckhUTUw9XCJcIix0aGlzLnByb2dyZXNzV3JhcHBlci5pbm5lckhUTUw9XCJcIixudWxsIT10aGlzLm9wdGlvbnMud2lkdGgmJih0aGlzLnNjcm9sbENvbnRhaW5lci5zdHlsZS53aWR0aD1cIm51bWJlclwiPT10eXBlb2YgdGhpcy5vcHRpb25zLndpZHRoP2Ake3RoaXMub3B0aW9ucy53aWR0aH1weGA6dGhpcy5vcHRpb25zLndpZHRoKTtjb25zdCB0PXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfHwxLGk9dGhpcy5zY3JvbGxDb250YWluZXIuY2xpZW50V2lkdGgsbj1NYXRoLmNlaWwoZS5kdXJhdGlvbioodGhpcy5vcHRpb25zLm1pblB4UGVyU2VjfHwwKSk7dGhpcy5pc1Njcm9sbGFibGU9bj5pO2NvbnN0IHM9dGhpcy5vcHRpb25zLmZpbGxQYXJlbnQmJiF0aGlzLmlzU2Nyb2xsYWJsZSxyPShzP2k6bikqdDt0aGlzLndyYXBwZXIuc3R5bGUud2lkdGg9cz9cIjEwMCVcIjpgJHtufXB4YCx0aGlzLnNjcm9sbENvbnRhaW5lci5zdHlsZS5vdmVyZmxvd1g9dGhpcy5pc1Njcm9sbGFibGU/XCJhdXRvXCI6XCJoaWRkZW5cIix0aGlzLnNjcm9sbENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwibm9TY3JvbGxiYXJcIiwhIXRoaXMub3B0aW9ucy5oaWRlU2Nyb2xsYmFyKSx0aGlzLmN1cnNvci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9YCR7dGhpcy5vcHRpb25zLmN1cnNvckNvbG9yfHx0aGlzLm9wdGlvbnMucHJvZ3Jlc3NDb2xvcn1gLHRoaXMuY3Vyc29yLnN0eWxlLndpZHRoPWAke3RoaXMub3B0aW9ucy5jdXJzb3JXaWR0aH1weGAsdGhpcy5hdWRpb0RhdGE9ZSx0aGlzLmVtaXQoXCJyZW5kZXJcIik7dHJ5e2lmKHRoaXMub3B0aW9ucy5zcGxpdENoYW5uZWxzKXlpZWxkIFByb21pc2UuYWxsKEFycmF5LmZyb20oe2xlbmd0aDplLm51bWJlck9mQ2hhbm5lbHN9KS5tYXAoKCh0LGkpPT57dmFyIG47Y29uc3Qgcz1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdGhpcy5vcHRpb25zKSxudWxsPT09KG49dGhpcy5vcHRpb25zLnNwbGl0Q2hhbm5lbHMpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuW2ldKTtyZXR1cm4gdGhpcy5yZW5kZXJDaGFubmVsKFtlLmdldENoYW5uZWxEYXRhKGkpXSxzLHIpfSkpKTtlbHNle2NvbnN0IHQ9W2UuZ2V0Q2hhbm5lbERhdGEoMCldO2UubnVtYmVyT2ZDaGFubmVscz4xJiZ0LnB1c2goZS5nZXRDaGFubmVsRGF0YSgxKSkseWllbGQgdGhpcy5yZW5kZXJDaGFubmVsKHQsdGhpcy5vcHRpb25zLHIpfX1jYXRjaCh0KXtyZXR1cm59dGhpcy5lbWl0KFwicmVuZGVyZWRcIil9KSl9cmVSZW5kZXIoKXtpZighdGhpcy5hdWRpb0RhdGEpcmV0dXJuO2NvbnN0e3Njcm9sbFdpZHRoOnR9PXRoaXMuc2Nyb2xsQ29udGFpbmVyLHtyaWdodDplfT10aGlzLnByb2dyZXNzV3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZih0aGlzLnJlbmRlcih0aGlzLmF1ZGlvRGF0YSksdGhpcy5pc1Njcm9sbGFibGUmJnQhPT10aGlzLnNjcm9sbENvbnRhaW5lci5zY3JvbGxXaWR0aCl7Y29uc3R7cmlnaHQ6dH09dGhpcy5wcm9ncmVzc1dyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7bGV0IGk9dC1lO2kqPTIsaT1pPDA/TWF0aC5mbG9vcihpKTpNYXRoLmNlaWwoaSksaS89Mix0aGlzLnNjcm9sbENvbnRhaW5lci5zY3JvbGxMZWZ0Kz1pfX16b29tKHQpe3RoaXMub3B0aW9ucy5taW5QeFBlclNlYz10LHRoaXMucmVSZW5kZXIoKX1zY3JvbGxJbnRvVmlldyh0LGU9ITEpe2NvbnN0e3Njcm9sbExlZnQ6aSxzY3JvbGxXaWR0aDpuLGNsaWVudFdpZHRoOnN9PXRoaXMuc2Nyb2xsQ29udGFpbmVyLHI9dCpuLG89aSxhPWkrcyxoPXMvMjtpZih0aGlzLmlzRHJhZ2dpbmcpe2NvbnN0IHQ9MzA7cit0PmE/dGhpcy5zY3JvbGxDb250YWluZXIuc2Nyb2xsTGVmdCs9dDpyLXQ8byYmKHRoaXMuc2Nyb2xsQ29udGFpbmVyLnNjcm9sbExlZnQtPXQpfWVsc2V7KHI8b3x8cj5hKSYmKHRoaXMuc2Nyb2xsQ29udGFpbmVyLnNjcm9sbExlZnQ9ci0odGhpcy5vcHRpb25zLmF1dG9DZW50ZXI/aDowKSk7Y29uc3QgdD1yLWktaDtlJiZ0aGlzLm9wdGlvbnMuYXV0b0NlbnRlciYmdD4wJiYodGhpcy5zY3JvbGxDb250YWluZXIuc2Nyb2xsTGVmdCs9TWF0aC5taW4odCwxMCkpfXtjb25zdCB0PXRoaXMuc2Nyb2xsQ29udGFpbmVyLnNjcm9sbExlZnQsZT10L24saT0odCtzKS9uO3RoaXMuZW1pdChcInNjcm9sbFwiLGUsaSl9fXJlbmRlclByb2dyZXNzKHQsZSl7aWYoaXNOYU4odCkpcmV0dXJuO2NvbnN0IGk9MTAwKnQ7dGhpcy5jYW52YXNXcmFwcGVyLnN0eWxlLmNsaXBQYXRoPWBwb2x5Z29uKCR7aX0lIDAsIDEwMCUgMCwgMTAwJSAxMDAlLCAke2l9JSAxMDAlKWAsdGhpcy5wcm9ncmVzc1dyYXBwZXIuc3R5bGUud2lkdGg9YCR7aX0lYCx0aGlzLmN1cnNvci5zdHlsZS5sZWZ0PWAke2l9JWAsdGhpcy5jdXJzb3Iuc3R5bGUudHJhbnNmb3JtPWB0cmFuc2xhdGVYKC0kezEwMD09PU1hdGgucm91bmQoaSk/dGhpcy5vcHRpb25zLmN1cnNvcldpZHRoOjB9cHgpYCx0aGlzLmlzU2Nyb2xsYWJsZSYmdGhpcy5vcHRpb25zLmF1dG9TY3JvbGwmJnRoaXMuc2Nyb2xsSW50b1ZpZXcodCxlKX1leHBvcnRJbWFnZShlLGksbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMuY2FudmFzV3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKFwiY2FudmFzXCIpO2lmKCF0Lmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJObyB3YXZlZm9ybSBkYXRhXCIpO2lmKFwiZGF0YVVSTFwiPT09bil7Y29uc3Qgbj1BcnJheS5mcm9tKHQpLm1hcCgodD0+dC50b0RhdGFVUkwoZSxpKSkpO3JldHVybiBQcm9taXNlLnJlc29sdmUobil9cmV0dXJuIFByb21pc2UuYWxsKEFycmF5LmZyb20odCkubWFwKCh0PT5uZXcgUHJvbWlzZSgoKG4scyk9Pnt0LnRvQmxvYigodD0+e3Q/bih0KTpzKG5ldyBFcnJvcihcIkNvdWxkIG5vdCBleHBvcnQgaW1hZ2VcIikpfSksZSxpKX0pKSkpKX0pKX19aC5NQVhfQ0FOVkFTX1dJRFRIPTRlMztjbGFzcyBsIGV4dGVuZHMgZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy51bnN1YnNjcmliZT0oKT0+e319c3RhcnQoKXt0aGlzLnVuc3Vic2NyaWJlPXRoaXMub24oXCJ0aWNrXCIsKCgpPT57cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgoKT0+e3RoaXMuZW1pdChcInRpY2tcIil9KSl9KSksdGhpcy5lbWl0KFwidGlja1wiKX1zdG9wKCl7dGhpcy51bnN1YnNjcmliZSgpfWRlc3Ryb3koKXt0aGlzLnVuc3Vic2NyaWJlKCl9fWNsYXNzIGQgZXh0ZW5kcyBle2NvbnN0cnVjdG9yKHQ9bmV3IEF1ZGlvQ29udGV4dCl7c3VwZXIoKSx0aGlzLmJ1ZmZlck5vZGU9bnVsbCx0aGlzLmF1dG9wbGF5PSExLHRoaXMucGxheVN0YXJ0VGltZT0wLHRoaXMucGxheWVkRHVyYXRpb249MCx0aGlzLl9tdXRlZD0hMSx0aGlzLmJ1ZmZlcj1udWxsLHRoaXMuY3VycmVudFNyYz1cIlwiLHRoaXMucGF1c2VkPSEwLHRoaXMuY3Jvc3NPcmlnaW49bnVsbCx0aGlzLmFkZEV2ZW50TGlzdGVuZXI9dGhpcy5vbix0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXI9dGhpcy51bix0aGlzLmF1ZGlvQ29udGV4dD10LHRoaXMuZ2Fpbk5vZGU9dGhpcy5hdWRpb0NvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMuZ2Fpbk5vZGUuY29ubmVjdCh0aGlzLmF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbil9bG9hZCgpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7fSkpfWdldCBzcmMoKXtyZXR1cm4gdGhpcy5jdXJyZW50U3JjfXNldCBzcmModCl7aWYodGhpcy5jdXJyZW50U3JjPXQsIXQpcmV0dXJuIHRoaXMuYnVmZmVyPW51bGwsdm9pZCB0aGlzLmVtaXQoXCJlbXB0aWVkXCIpO2ZldGNoKHQpLnRoZW4oKHQ9PnQuYXJyYXlCdWZmZXIoKSkpLnRoZW4oKGU9PnRoaXMuY3VycmVudFNyYyE9PXQ/bnVsbDp0aGlzLmF1ZGlvQ29udGV4dC5kZWNvZGVBdWRpb0RhdGEoZSkpKS50aGVuKChlPT57dGhpcy5jdXJyZW50U3JjPT09dCYmKHRoaXMuYnVmZmVyPWUsdGhpcy5lbWl0KFwibG9hZGVkbWV0YWRhdGFcIiksdGhpcy5lbWl0KFwiY2FucGxheVwiKSx0aGlzLmF1dG9wbGF5JiZ0aGlzLnBsYXkoKSl9KSl9X3BsYXkoKXt2YXIgdDt0aGlzLnBhdXNlZCYmKHRoaXMucGF1c2VkPSExLG51bGw9PT0odD10aGlzLmJ1ZmZlck5vZGUpfHx2b2lkIDA9PT10fHx0LmRpc2Nvbm5lY3QoKSx0aGlzLmJ1ZmZlck5vZGU9dGhpcy5hdWRpb0NvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCksdGhpcy5idWZmZXJOb2RlLmJ1ZmZlcj10aGlzLmJ1ZmZlcix0aGlzLmJ1ZmZlck5vZGUuY29ubmVjdCh0aGlzLmdhaW5Ob2RlKSx0aGlzLnBsYXllZER1cmF0aW9uPj10aGlzLmR1cmF0aW9uJiYodGhpcy5wbGF5ZWREdXJhdGlvbj0wKSx0aGlzLmJ1ZmZlck5vZGUuc3RhcnQodGhpcy5hdWRpb0NvbnRleHQuY3VycmVudFRpbWUsdGhpcy5wbGF5ZWREdXJhdGlvbiksdGhpcy5wbGF5U3RhcnRUaW1lPXRoaXMuYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lLHRoaXMuYnVmZmVyTm9kZS5vbmVuZGVkPSgpPT57dGhpcy5jdXJyZW50VGltZT49dGhpcy5kdXJhdGlvbiYmKHRoaXMucGF1c2UoKSx0aGlzLmVtaXQoXCJlbmRlZFwiKSl9KX1fcGF1c2UoKXt2YXIgdDt0aGlzLnBhdXNlZHx8KHRoaXMucGF1c2VkPSEwLG51bGw9PT0odD10aGlzLmJ1ZmZlck5vZGUpfHx2b2lkIDA9PT10fHx0LnN0b3AoKSx0aGlzLnBsYXllZER1cmF0aW9uKz10aGlzLmF1ZGlvQ29udGV4dC5jdXJyZW50VGltZS10aGlzLnBsYXlTdGFydFRpbWUpfXBsYXkoKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3RoaXMuX3BsYXkoKSx0aGlzLmVtaXQoXCJwbGF5XCIpfSkpfXBhdXNlKCl7dGhpcy5fcGF1c2UoKSx0aGlzLmVtaXQoXCJwYXVzZVwiKX1zdG9wQXQodCl7dmFyIGUsaTtjb25zdCBuPXQtdGhpcy5jdXJyZW50VGltZTtudWxsPT09KGU9dGhpcy5idWZmZXJOb2RlKXx8dm9pZCAwPT09ZXx8ZS5zdG9wKHRoaXMuYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lK24pLG51bGw9PT0oaT10aGlzLmJ1ZmZlck5vZGUpfHx2b2lkIDA9PT1pfHxpLmFkZEV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLCgoKT0+e3RoaXMuYnVmZmVyTm9kZT1udWxsLHRoaXMucGF1c2UoKX0pLHtvbmNlOiEwfSl9c2V0U2lua0lkKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuYXVkaW9Db250ZXh0LnNldFNpbmtJZChlKX0pKX1nZXQgcGxheWJhY2tSYXRlKCl7dmFyIHQsZTtyZXR1cm4gbnVsbCE9PShlPW51bGw9PT0odD10aGlzLmJ1ZmZlck5vZGUpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnBsYXliYWNrUmF0ZS52YWx1ZSkmJnZvaWQgMCE9PWU/ZToxfXNldCBwbGF5YmFja1JhdGUodCl7dGhpcy5idWZmZXJOb2RlJiYodGhpcy5idWZmZXJOb2RlLnBsYXliYWNrUmF0ZS52YWx1ZT10KX1nZXQgY3VycmVudFRpbWUoKXtyZXR1cm4gdGhpcy5wYXVzZWQ/dGhpcy5wbGF5ZWREdXJhdGlvbjp0aGlzLnBsYXllZER1cmF0aW9uK3RoaXMuYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lLXRoaXMucGxheVN0YXJ0VGltZX1zZXQgY3VycmVudFRpbWUodCl7dGhpcy5lbWl0KFwic2Vla2luZ1wiKSx0aGlzLnBhdXNlZD90aGlzLnBsYXllZER1cmF0aW9uPXQ6KHRoaXMuX3BhdXNlKCksdGhpcy5wbGF5ZWREdXJhdGlvbj10LHRoaXMuX3BsYXkoKSksdGhpcy5lbWl0KFwidGltZXVwZGF0ZVwiKX1nZXQgZHVyYXRpb24oKXt2YXIgdDtyZXR1cm4obnVsbD09PSh0PXRoaXMuYnVmZmVyKXx8dm9pZCAwPT09dD92b2lkIDA6dC5kdXJhdGlvbil8fDB9Z2V0IHZvbHVtZSgpe3JldHVybiB0aGlzLmdhaW5Ob2RlLmdhaW4udmFsdWV9c2V0IHZvbHVtZSh0KXt0aGlzLmdhaW5Ob2RlLmdhaW4udmFsdWU9dCx0aGlzLmVtaXQoXCJ2b2x1bWVjaGFuZ2VcIil9Z2V0IG11dGVkKCl7cmV0dXJuIHRoaXMuX211dGVkfXNldCBtdXRlZCh0KXt0aGlzLl9tdXRlZCE9PXQmJih0aGlzLl9tdXRlZD10LHRoaXMuX211dGVkP3RoaXMuZ2Fpbk5vZGUuZGlzY29ubmVjdCgpOnRoaXMuZ2Fpbk5vZGUuY29ubmVjdCh0aGlzLmF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbikpfWNhblBsYXlUeXBlKHQpe3JldHVybi9eKGF1ZGlvfHZpZGVvKVxcLy8udGVzdCh0KX1nZXRHYWluTm9kZSgpe3JldHVybiB0aGlzLmdhaW5Ob2RlfWdldENoYW5uZWxEYXRhKCl7Y29uc3QgdD1bXTtpZighdGhpcy5idWZmZXIpcmV0dXJuIHQ7Y29uc3QgZT10aGlzLmJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzO2ZvcihsZXQgaT0wO2k8ZTtpKyspdC5wdXNoKHRoaXMuYnVmZmVyLmdldENoYW5uZWxEYXRhKGkpKTtyZXR1cm4gdH19Y29uc3QgYz17d2F2ZUNvbG9yOlwiIzk5OVwiLHByb2dyZXNzQ29sb3I6XCIjNTU1XCIsY3Vyc29yV2lkdGg6MSxtaW5QeFBlclNlYzowLGZpbGxQYXJlbnQ6ITAsaW50ZXJhY3Q6ITAsZHJhZ1RvU2VlazohMSxhdXRvU2Nyb2xsOiEwLGF1dG9DZW50ZXI6ITAsc2FtcGxlUmF0ZTo4ZTN9O2NsYXNzIHUgZXh0ZW5kcyBhe3N0YXRpYyBjcmVhdGUodCl7cmV0dXJuIG5ldyB1KHQpfWNvbnN0cnVjdG9yKHQpe2NvbnN0IGU9dC5tZWRpYXx8KFwiV2ViQXVkaW9cIj09PXQuYmFja2VuZD9uZXcgZDp2b2lkIDApO3N1cGVyKHttZWRpYTplLG1lZGlhQ29udHJvbHM6dC5tZWRpYUNvbnRyb2xzLGF1dG9wbGF5OnQuYXV0b3BsYXkscGxheWJhY2tSYXRlOnQuYXVkaW9SYXRlfSksdGhpcy5wbHVnaW5zPVtdLHRoaXMuZGVjb2RlZERhdGE9bnVsbCx0aGlzLnN1YnNjcmlwdGlvbnM9W10sdGhpcy5tZWRpYVN1YnNjcmlwdGlvbnM9W10sdGhpcy5vcHRpb25zPU9iamVjdC5hc3NpZ24oe30sYyx0KSx0aGlzLnRpbWVyPW5ldyBsO2NvbnN0IGk9ZT92b2lkIDA6dGhpcy5nZXRNZWRpYUVsZW1lbnQoKTt0aGlzLnJlbmRlcmVyPW5ldyBoKHRoaXMub3B0aW9ucyxpKSx0aGlzLmluaXRQbGF5ZXJFdmVudHMoKSx0aGlzLmluaXRSZW5kZXJlckV2ZW50cygpLHRoaXMuaW5pdFRpbWVyRXZlbnRzKCksdGhpcy5pbml0UGx1Z2lucygpLFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCgpPT57dGhpcy5lbWl0KFwiaW5pdFwiKTtjb25zdCB0PXRoaXMub3B0aW9ucy51cmx8fHRoaXMuZ2V0U3JjKCl8fFwiXCI7KHR8fHRoaXMub3B0aW9ucy5wZWFrcyYmdGhpcy5vcHRpb25zLmR1cmF0aW9uKSYmdGhpcy5sb2FkKHQsdGhpcy5vcHRpb25zLnBlYWtzLHRoaXMub3B0aW9ucy5kdXJhdGlvbil9KSl9dXBkYXRlUHJvZ3Jlc3ModD10aGlzLmdldEN1cnJlbnRUaW1lKCkpe3JldHVybiB0aGlzLnJlbmRlcmVyLnJlbmRlclByb2dyZXNzKHQvdGhpcy5nZXREdXJhdGlvbigpLHRoaXMuaXNQbGF5aW5nKCkpLHR9aW5pdFRpbWVyRXZlbnRzKCl7dGhpcy5zdWJzY3JpcHRpb25zLnB1c2godGhpcy50aW1lci5vbihcInRpY2tcIiwoKCk9PntpZighdGhpcy5pc1NlZWtpbmcoKSl7Y29uc3QgdD10aGlzLnVwZGF0ZVByb2dyZXNzKCk7dGhpcy5lbWl0KFwidGltZXVwZGF0ZVwiLHQpLHRoaXMuZW1pdChcImF1ZGlvcHJvY2Vzc1wiLHQpfX0pKSl9aW5pdFBsYXllckV2ZW50cygpe3RoaXMuaXNQbGF5aW5nKCkmJih0aGlzLmVtaXQoXCJwbGF5XCIpLHRoaXMudGltZXIuc3RhcnQoKSksdGhpcy5tZWRpYVN1YnNjcmlwdGlvbnMucHVzaCh0aGlzLm9uTWVkaWFFdmVudChcInRpbWV1cGRhdGVcIiwoKCk9Pntjb25zdCB0PXRoaXMudXBkYXRlUHJvZ3Jlc3MoKTt0aGlzLmVtaXQoXCJ0aW1ldXBkYXRlXCIsdCl9KSksdGhpcy5vbk1lZGlhRXZlbnQoXCJwbGF5XCIsKCgpPT57dGhpcy5lbWl0KFwicGxheVwiKSx0aGlzLnRpbWVyLnN0YXJ0KCl9KSksdGhpcy5vbk1lZGlhRXZlbnQoXCJwYXVzZVwiLCgoKT0+e3RoaXMuZW1pdChcInBhdXNlXCIpLHRoaXMudGltZXIuc3RvcCgpfSkpLHRoaXMub25NZWRpYUV2ZW50KFwiZW1wdGllZFwiLCgoKT0+e3RoaXMudGltZXIuc3RvcCgpfSkpLHRoaXMub25NZWRpYUV2ZW50KFwiZW5kZWRcIiwoKCk9Pnt0aGlzLmVtaXQoXCJmaW5pc2hcIil9KSksdGhpcy5vbk1lZGlhRXZlbnQoXCJzZWVraW5nXCIsKCgpPT57dGhpcy5lbWl0KFwic2Vla2luZ1wiLHRoaXMuZ2V0Q3VycmVudFRpbWUoKSl9KSkpfWluaXRSZW5kZXJlckV2ZW50cygpe3RoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHRoaXMucmVuZGVyZXIub24oXCJjbGlja1wiLCgodCxlKT0+e3RoaXMub3B0aW9ucy5pbnRlcmFjdCYmKHRoaXMuc2Vla1RvKHQpLHRoaXMuZW1pdChcImludGVyYWN0aW9uXCIsdCp0aGlzLmdldER1cmF0aW9uKCkpLHRoaXMuZW1pdChcImNsaWNrXCIsdCxlKSl9KSksdGhpcy5yZW5kZXJlci5vbihcImRibGNsaWNrXCIsKCh0LGUpPT57dGhpcy5lbWl0KFwiZGJsY2xpY2tcIix0LGUpfSkpLHRoaXMucmVuZGVyZXIub24oXCJzY3JvbGxcIiwoKHQsZSk9Pntjb25zdCBpPXRoaXMuZ2V0RHVyYXRpb24oKTt0aGlzLmVtaXQoXCJzY3JvbGxcIix0KmksZSppKX0pKSx0aGlzLnJlbmRlcmVyLm9uKFwicmVuZGVyXCIsKCgpPT57dGhpcy5lbWl0KFwicmVkcmF3XCIpfSkpLHRoaXMucmVuZGVyZXIub24oXCJyZW5kZXJlZFwiLCgoKT0+e3RoaXMuZW1pdChcInJlZHJhd2NvbXBsZXRlXCIpfSkpKTt7bGV0IHQ7dGhpcy5zdWJzY3JpcHRpb25zLnB1c2godGhpcy5yZW5kZXJlci5vbihcImRyYWdcIiwoZT0+e3RoaXMub3B0aW9ucy5pbnRlcmFjdCYmKHRoaXMucmVuZGVyZXIucmVuZGVyUHJvZ3Jlc3MoZSksY2xlYXJUaW1lb3V0KHQpLHQ9c2V0VGltZW91dCgoKCk9Pnt0aGlzLnNlZWtUbyhlKX0pLHRoaXMuaXNQbGF5aW5nKCk/MDoyMDApLHRoaXMuZW1pdChcImludGVyYWN0aW9uXCIsZSp0aGlzLmdldER1cmF0aW9uKCkpLHRoaXMuZW1pdChcImRyYWdcIixlKSl9KSkpfX1pbml0UGx1Z2lucygpe3ZhciB0OyhudWxsPT09KHQ9dGhpcy5vcHRpb25zLnBsdWdpbnMpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lmxlbmd0aCkmJnRoaXMub3B0aW9ucy5wbHVnaW5zLmZvckVhY2goKHQ9Pnt0aGlzLnJlZ2lzdGVyUGx1Z2luKHQpfSkpfXVuc3Vic2NyaWJlUGxheWVyRXZlbnRzKCl7dGhpcy5tZWRpYVN1YnNjcmlwdGlvbnMuZm9yRWFjaCgodD0+dCgpKSksdGhpcy5tZWRpYVN1YnNjcmlwdGlvbnM9W119c2V0T3B0aW9ucyh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmFzc2lnbih7fSx0aGlzLm9wdGlvbnMsdCksdGhpcy5yZW5kZXJlci5zZXRPcHRpb25zKHRoaXMub3B0aW9ucyksdC5hdWRpb1JhdGUmJnRoaXMuc2V0UGxheWJhY2tSYXRlKHQuYXVkaW9SYXRlKSxudWxsIT10Lm1lZGlhQ29udHJvbHMmJih0aGlzLmdldE1lZGlhRWxlbWVudCgpLmNvbnRyb2xzPXQubWVkaWFDb250cm9scyl9cmVnaXN0ZXJQbHVnaW4odCl7cmV0dXJuIHQuX2luaXQodGhpcyksdGhpcy5wbHVnaW5zLnB1c2godCksdGhpcy5zdWJzY3JpcHRpb25zLnB1c2godC5vbmNlKFwiZGVzdHJveVwiLCgoKT0+e3RoaXMucGx1Z2lucz10aGlzLnBsdWdpbnMuZmlsdGVyKChlPT5lIT09dCkpfSkpKSx0fWdldFdyYXBwZXIoKXtyZXR1cm4gdGhpcy5yZW5kZXJlci5nZXRXcmFwcGVyKCl9Z2V0U2Nyb2xsKCl7cmV0dXJuIHRoaXMucmVuZGVyZXIuZ2V0U2Nyb2xsKCl9Z2V0QWN0aXZlUGx1Z2lucygpe3JldHVybiB0aGlzLnBsdWdpbnN9bG9hZEF1ZGlvKGUsbixzLHIpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYodGhpcy5lbWl0KFwibG9hZFwiLGUpLCF0aGlzLm9wdGlvbnMubWVkaWEmJnRoaXMuaXNQbGF5aW5nKCkmJnRoaXMucGF1c2UoKSx0aGlzLmRlY29kZWREYXRhPW51bGwsIW4mJiFzKXtjb25zdCB0PXQ9PnRoaXMuZW1pdChcImxvYWRpbmdcIix0KTtuPXlpZWxkIG8uZmV0Y2hCbG9iKGUsdCx0aGlzLm9wdGlvbnMuZmV0Y2hQYXJhbXMpfXRoaXMuc2V0U3JjKGUsbik7Y29uc3QgdD1yfHx0aGlzLmdldER1cmF0aW9uKCl8fCh5aWVsZCBuZXcgUHJvbWlzZSgodD0+e3RoaXMub25jZU1lZGlhRXZlbnQoXCJsb2FkZWRtZXRhZGF0YVwiLCgoKT0+dCh0aGlzLmdldER1cmF0aW9uKCkpKSl9KSkpO2lmKHMpdGhpcy5kZWNvZGVkRGF0YT1pLmNyZWF0ZUJ1ZmZlcihzLHR8fDApO2Vsc2UgaWYobil7Y29uc3QgdD15aWVsZCBuLmFycmF5QnVmZmVyKCk7dGhpcy5kZWNvZGVkRGF0YT15aWVsZCBpLmRlY29kZSh0LHRoaXMub3B0aW9ucy5zYW1wbGVSYXRlKX10aGlzLmRlY29kZWREYXRhJiYodGhpcy5lbWl0KFwiZGVjb2RlXCIsdGhpcy5nZXREdXJhdGlvbigpKSx0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLmRlY29kZWREYXRhKSksdGhpcy5lbWl0KFwicmVhZHlcIix0aGlzLmdldER1cmF0aW9uKCkpfSkpfWxvYWQoZSxpLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5sb2FkQXVkaW8oZSx2b2lkIDAsaSxuKX0pKX1sb2FkQmxvYihlLGksbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmxvYWRBdWRpbyhcImJsb2JcIixlLGksbil9KSl9em9vbSh0KXtpZighdGhpcy5kZWNvZGVkRGF0YSl0aHJvdyBuZXcgRXJyb3IoXCJObyBhdWRpbyBsb2FkZWRcIik7dGhpcy5yZW5kZXJlci56b29tKHQpLHRoaXMuZW1pdChcInpvb21cIix0KX1nZXREZWNvZGVkRGF0YSgpe3JldHVybiB0aGlzLmRlY29kZWREYXRhfWV4cG9ydFBlYWtzKHtjaGFubmVsczp0PTIsbWF4TGVuZ3RoOmU9OGUzLHByZWNpc2lvbjppPTFlNH09e30pe2lmKCF0aGlzLmRlY29kZWREYXRhKXRocm93IG5ldyBFcnJvcihcIlRoZSBhdWRpbyBoYXMgbm90IGJlZW4gZGVjb2RlZCB5ZXRcIik7Y29uc3Qgbj1NYXRoLm1pbih0LHRoaXMuZGVjb2RlZERhdGEubnVtYmVyT2ZDaGFubmVscykscz1bXTtmb3IobGV0IHQ9MDt0PG47dCsrKXtjb25zdCBuPXRoaXMuZGVjb2RlZERhdGEuZ2V0Q2hhbm5lbERhdGEodCkscj1bXSxvPU1hdGgucm91bmQobi5sZW5ndGgvZSk7Zm9yKGxldCB0PTA7dDxlO3QrKyl7Y29uc3QgZT1uLnNsaWNlKHQqbywodCsxKSpvKTtsZXQgcz0wO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKXtjb25zdCBpPWVbdF07TWF0aC5hYnMoaSk+TWF0aC5hYnMocykmJihzPWkpfXIucHVzaChNYXRoLnJvdW5kKHMqaSkvaSl9cy5wdXNoKHIpfXJldHVybiBzfWdldER1cmF0aW9uKCl7bGV0IHQ9c3VwZXIuZ2V0RHVyYXRpb24oKXx8MDtyZXR1cm4gMCE9PXQmJnQhPT0xLzB8fCF0aGlzLmRlY29kZWREYXRhfHwodD10aGlzLmRlY29kZWREYXRhLmR1cmF0aW9uKSx0fXRvZ2dsZUludGVyYWN0aW9uKHQpe3RoaXMub3B0aW9ucy5pbnRlcmFjdD10fXNldFRpbWUodCl7c3VwZXIuc2V0VGltZSh0KSx0aGlzLnVwZGF0ZVByb2dyZXNzKHQpfXNlZWtUbyh0KXtjb25zdCBlPXRoaXMuZ2V0RHVyYXRpb24oKSp0O3RoaXMuc2V0VGltZShlKX1wbGF5UGF1c2UoKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLmlzUGxheWluZygpP3RoaXMucGF1c2UoKTp0aGlzLnBsYXkoKX0pKX1zdG9wKCl7dGhpcy5wYXVzZSgpLHRoaXMuc2V0VGltZSgwKX1za2lwKHQpe3RoaXMuc2V0VGltZSh0aGlzLmdldEN1cnJlbnRUaW1lKCkrdCl9ZW1wdHkoKXt0aGlzLmxvYWQoXCJcIixbWzBdXSwuMDAxKX1zZXRNZWRpYUVsZW1lbnQodCl7dGhpcy51bnN1YnNjcmliZVBsYXllckV2ZW50cygpLHN1cGVyLnNldE1lZGlhRWxlbWVudCh0KSx0aGlzLmluaXRQbGF5ZXJFdmVudHMoKX1leHBvcnRJbWFnZShlPVwiaW1hZ2UvcG5nXCIsaT0xLG49XCJkYXRhVVJMXCIpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMucmVuZGVyZXIuZXhwb3J0SW1hZ2UoZSxpLG4pfSkpfWRlc3Ryb3koKXt0aGlzLmVtaXQoXCJkZXN0cm95XCIpLHRoaXMucGx1Z2lucy5mb3JFYWNoKCh0PT50LmRlc3Ryb3koKSkpLHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKCh0PT50KCkpKSx0aGlzLnVuc3Vic2NyaWJlUGxheWVyRXZlbnRzKCksdGhpcy50aW1lci5kZXN0cm95KCksdGhpcy5yZW5kZXJlci5kZXN0cm95KCksc3VwZXIuZGVzdHJveSgpfX11LkJhc2VQbHVnaW49Y2xhc3MgZXh0ZW5kcyBle2NvbnN0cnVjdG9yKHQpe3N1cGVyKCksdGhpcy5zdWJzY3JpcHRpb25zPVtdLHRoaXMub3B0aW9ucz10fW9uSW5pdCgpe31faW5pdCh0KXt0aGlzLndhdmVzdXJmZXI9dCx0aGlzLm9uSW5pdCgpfWRlc3Ryb3koKXt0aGlzLmVtaXQoXCJkZXN0cm95XCIpLHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKCh0PT50KCkpKX19LHUuZG9tPXI7ZXhwb3J0e3UgYXMgZGVmYXVsdH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/wavesurfer.js/dist/wavesurfer.esm.js\n"));

/***/ })

}]);